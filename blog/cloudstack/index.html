<!DOCTYPE html><html lang="en" dir="ltr" data-theme="dark" data-has-toc data-has-sidebar class="astro-bguv2lll"> <head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Apache CloudStack Ubuntu/KVM Guide for x86_64 and ARM64 | ScaleNinja</title><link rel="canonical" href="https://scaleninja.com/blog/cloudstack/"/><link rel="sitemap" href="/sitemap-index.xml"/><link href="https://scaleninja.com/blog/rss.xml" rel="alternate" title="Blog" type="application/rss+xml"/><link rel="shortcut icon" href="/favicon.svg" type="image/svg+xml"/><meta name="generator" content="Astro v5.16.6"/><meta name="generator" content="Starlight v0.37.1"/><meta property="og:title" content="Apache CloudStack Ubuntu/KVM Guide for x86_64 and ARM64"/><meta property="og:type" content="article"/><meta property="og:url" content="https://scaleninja.com/blog/cloudstack/"/><meta property="og:locale" content="en"/><meta property="og:description" content="The Apache CloudStack IaaS Cloud Install &#38; Build Guide for Ubuntu/KVM x86_64 and ARM64"/><meta property="og:site_name" content="ScaleNinja"/><meta name="twitter:card" content="summary_large_image"/><meta name="description" content="The Apache CloudStack IaaS Cloud Install &#38; Build Guide for Ubuntu/KVM x86_64 and ARM64"/><script>
"use strict";(()=>{(()=>{let t="theme-toggle",n;function r(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function l(){let e=localStorage.getItem(t);return e==="dark"||e==="light"?e:null}function m(){return n||l()||r()}function s(e){e===r()?localStorage.removeItem(t):localStorage.setItem(t,e)}function h(e){let o=document.documentElement;o.classList.toggle("dark",e==="dark"),o.dataset.theme=e,o.style.colorScheme=e}function a(e){n=e,s(e),h(e)}function c(){a(m())}c(),document.addEventListener("astro:after-swap",c),window.astroThemeToggle={setTheme:a,getTheme:m}})();})();
</script><link rel="stylesheet" href="/_astro/print.DNXP8c50.css" media="print"><link rel="stylesheet" href="/_astro/Authors.C4r1WHgl.css">
<style>@layer starlight.components{:root{--sl-badge-default-border: var(--sl-color-accent);--sl-badge-default-bg: var(--sl-color-accent-low);--sl-badge-default-text: #fff;--sl-badge-note-border: var(--sl-color-blue);--sl-badge-note-bg: var(--sl-color-blue-low);--sl-badge-note-text: #fff;--sl-badge-danger-border: var(--sl-color-red);--sl-badge-danger-bg: var(--sl-color-red-low);--sl-badge-danger-text: #fff;--sl-badge-success-border: var(--sl-color-green);--sl-badge-success-bg: var(--sl-color-green-low);--sl-badge-success-text: #fff;--sl-badge-caution-border: var(--sl-color-orange);--sl-badge-caution-bg: var(--sl-color-orange-low);--sl-badge-caution-text: #fff;--sl-badge-tip-border: var(--sl-color-purple);--sl-badge-tip-bg: var(--sl-color-purple-low);--sl-badge-tip-text: #fff}[data-theme=light]:root{--sl-badge-default-bg: var(--sl-color-accent-high);--sl-badge-note-bg: var(--sl-color-blue-high);--sl-badge-danger-bg: var(--sl-color-red-high);--sl-badge-success-bg: var(--sl-color-green-high);--sl-badge-caution-bg: var(--sl-color-orange-high);--sl-badge-tip-bg: var(--sl-color-purple-high)}.sl-badge:where(.astro-avdet4wd){display:inline-block;border:1px solid var(--sl-color-border-badge);border-radius:.25rem;font-family:var(--sl-font-system-mono);line-height:normal;color:var(--sl-color-text-badge);background-color:var(--sl-color-bg-badge);overflow-wrap:anywhere}.sidebar-content .sl-badge:where(.astro-avdet4wd){line-height:1;font-size:var(--sl-text-xs);padding:.125rem .375rem}.sidebar-content a[aria-current=page]>.sl-badge:where(.astro-avdet4wd){--sl-color-bg-badge: transparent;--sl-color-border-badge: currentColor;color:inherit}.default:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-default-bg);--sl-color-border-badge: var(--sl-badge-default-border);--sl-color-text-badge: var(--sl-badge-default-text)}.note:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-note-bg);--sl-color-border-badge: var(--sl-badge-note-border);--sl-color-text-badge: var(--sl-badge-note-text)}.danger:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-danger-bg);--sl-color-border-badge: var(--sl-badge-danger-border);--sl-color-text-badge: var(--sl-badge-danger-text)}.success:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-success-bg);--sl-color-border-badge: var(--sl-badge-success-border);--sl-color-text-badge: var(--sl-badge-success-text)}.tip:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-tip-bg);--sl-color-border-badge: var(--sl-badge-tip-border);--sl-color-text-badge: var(--sl-badge-tip-text)}.caution:where(.astro-avdet4wd){--sl-color-bg-badge: var(--sl-badge-caution-bg);--sl-color-border-badge: var(--sl-badge-caution-border);--sl-color-text-badge: var(--sl-badge-caution-text)}.small:where(.astro-avdet4wd){font-size:var(--sl-text-xs);padding:.125rem .25rem}.medium:where(.astro-avdet4wd){font-size:var(--sl-text-sm);padding:.175rem .35rem}.large:where(.astro-avdet4wd){font-size:var(--sl-text-base);padding:.225rem .45rem}.sl-markdown-content :is(h1,h2,h3,h4,h5,h6) .sl-badge:where(.astro-avdet4wd){vertical-align:middle}}
@layer starlight.components{.card-grid:where(.astro-zntqmydn){display:grid;grid-template-columns:100%;gap:1rem}.card-grid:where(.astro-zntqmydn)>*{margin-top:0!important}@media(min-width:50rem){.card-grid:where(.astro-zntqmydn){grid-template-columns:1fr 1fr;gap:1.5rem}.stagger:where(.astro-zntqmydn){--stagger-height: 5rem;padding-bottom:var(--stagger-height)}.stagger:where(.astro-zntqmydn)>*:nth-child(2n){transform:translateY(var(--stagger-height))}}}
@layer starlight.components{.card:where(.astro-v5tidmuc){--sl-card-border: var(--sl-color-purple);--sl-card-bg: var(--sl-color-purple-low);border:1px solid var(--sl-color-gray-5);background-color:var(--sl-color-black);padding:clamp(1rem,calc(.125rem + 3vw),2.5rem);flex-direction:column;gap:clamp(.5rem,calc(.125rem + 1vw),1rem)}.card:where(.astro-v5tidmuc):nth-child(4n+1){--sl-card-border: var(--sl-color-orange);--sl-card-bg: var(--sl-color-orange-low)}.card:where(.astro-v5tidmuc):nth-child(4n+3){--sl-card-border: var(--sl-color-green);--sl-card-bg: var(--sl-color-green-low)}.card:where(.astro-v5tidmuc):nth-child(4n+4){--sl-card-border: var(--sl-color-red);--sl-card-bg: var(--sl-color-red-low)}.card:where(.astro-v5tidmuc):nth-child(4n+5){--sl-card-border: var(--sl-color-blue);--sl-card-bg: var(--sl-color-blue-low)}.title:where(.astro-v5tidmuc){font-weight:600;font-size:var(--sl-text-h4);color:var(--sl-color-white);line-height:var(--sl-line-height-headings);gap:1rem;align-items:center}.card:where(.astro-v5tidmuc) .icon:where(.astro-v5tidmuc){border:1px solid var(--sl-card-border);background-color:var(--sl-card-bg);padding:.2em;border-radius:.25rem;flex-shrink:0}.card:where(.astro-v5tidmuc) .body:where(.astro-v5tidmuc){margin:0;font-size:clamp(var(--sl-text-sm),calc(.5rem + 1vw),var(--sl-text-body))}}
@layer starlight.components{svg:where(.astro-c6vsoqas){color:var(--sl-icon-color);font-size:var(--sl-icon-size, 1em);width:1em;height:1em}}
@layer starlight.components{starlight-tabs:where(.astro-esqgolmp){display:block}.tablist-wrapper:where(.astro-esqgolmp){overflow-x:auto}:where(.astro-esqgolmp)[role=tablist]{display:flex;list-style:none;border-bottom:2px solid var(--sl-color-gray-5);padding:0}.tab:where(.astro-esqgolmp){display:flex}.tab:where(.astro-esqgolmp)>:where(.astro-esqgolmp)[role=tab]{--sl-tab-color-border: var(--sl-color-gray-5);display:flex;align-items:center;gap:.5rem;line-height:var(--sl-line-height-headings);padding:.275rem 1.25rem;text-decoration:none;box-shadow:0 2px 0 var(--sl-tab-color-border);color:var(--sl-color-gray-3);outline-offset:var(--sl-outline-offset-inside);overflow-wrap:initial}.tab:where(.astro-esqgolmp) :where(.astro-esqgolmp)[role=tab][aria-selected=true]{--sl-tab-color-border: var(--sl-color-text-accent);color:var(--sl-color-white);font-weight:600}.tablist-wrapper:where(.astro-esqgolmp)~[role=tabpanel]{margin-top:1rem}}
@layer starlight.components{.sl-link-card:where(.astro-mf7fz2mj){display:grid;grid-template-columns:1fr auto;gap:.5rem;border:1px solid var(--sl-color-gray-5);border-radius:.5rem;padding:1rem;box-shadow:var(--sl-shadow-sm);position:relative}a:where(.astro-mf7fz2mj){text-decoration:none;line-height:var(--sl-line-height-headings)}a:where(.astro-mf7fz2mj):before{content:"";position:absolute;inset:0}.stack:where(.astro-mf7fz2mj){flex-direction:column;gap:.5rem}.title:where(.astro-mf7fz2mj){color:var(--sl-color-white);font-weight:600;font-size:var(--sl-text-lg)}.description:where(.astro-mf7fz2mj){color:var(--sl-color-gray-3);line-height:1.5}.icon:where(.astro-mf7fz2mj){color:var(--sl-color-gray-3)}.sl-link-card:where(.astro-mf7fz2mj):hover{background:var(--sl-color-gray-7, var(--sl-color-gray-6));border-color:var(--sl-color-gray-2)}.sl-link-card:where(.astro-mf7fz2mj):hover .icon:where(.astro-mf7fz2mj){color:var(--sl-color-white)}}
@layer starlight.components{.sl-steps{--bullet-size: calc(var(--sl-line-height) * 1rem);--bullet-margin: .375rem;list-style:none;counter-reset:steps-counter var(--sl-steps-start, 0);padding-inline-start:0}.sl-steps>li{counter-increment:steps-counter;position:relative;padding-inline-start:calc(var(--bullet-size) + 1rem);padding-bottom:1px;min-height:calc(var(--bullet-size) + var(--bullet-margin))}.sl-steps>li+li{margin-top:0}.sl-steps>li:before{content:counter(steps-counter);position:absolute;top:0;inset-inline-start:0;width:var(--bullet-size);height:var(--bullet-size);line-height:var(--bullet-size);font-size:var(--sl-text-xs);font-weight:600;text-align:center;color:var(--sl-color-white);background-color:var(--sl-color-gray-6);border-radius:99rem;box-shadow:inset 0 0 0 1px var(--sl-color-gray-5)}.sl-steps>li:after{--guide-width: 1px;content:"";position:absolute;top:calc(var(--bullet-size) + var(--bullet-margin));bottom:var(--bullet-margin);inset-inline-start:calc((var(--bullet-size) - var(--guide-width)) / 2);width:var(--guide-width);background-color:var(--sl-color-hairline-light)}}@layer starlight.content{.sl-steps>li>:first-child{--lh: calc(1em * var(--sl-line-height));--shift-y: calc(.5 * (var(--bullet-size) - var(--lh)));transform:translateY(var(--shift-y));margin-bottom:var(--shift-y)}.sl-steps>li>:first-child:where(h1,h2,h3,h4,h5,h6){--lh: calc(1em * var(--sl-line-height-headings))}@supports (--prop: 1lh){.sl-steps>li>:first-child{--lh: 1lh}}}
@layer starlight.components{starlight-file-tree:where(.astro-p67cqifm){--x-space: 1.5rem;--y-space: .125rem;--y-pad: 0;display:block;border:1px solid var(--sl-color-gray-5);padding:1rem;background-color:var(--sl-color-gray-6);font-size:var(--sl-text-xs);font-family:var(--__sl-font-mono);overflow-x:auto}starlight-file-tree:where(.astro-p67cqifm) .directory>details{border:0;padding:0;padding-inline-start:var(--x-space);background:transparent}starlight-file-tree:where(.astro-p67cqifm) .directory>details>summary{margin-inline-start:calc(-1 * var(--x-space));border:0;padding:var(--y-pad) .625rem;font-weight:400;color:var(--sl-color-white);max-width:100%}starlight-file-tree:where(.astro-p67cqifm) .directory>details>summary::marker,starlight-file-tree:where(.astro-p67cqifm) .directory>details>summary::-webkit-details-marker{color:var(--sl-color-gray-3)}starlight-file-tree:where(.astro-p67cqifm) .directory>details>summary:hover,starlight-file-tree:where(.astro-p67cqifm) .directory>details>summary:hover .tree-icon{cursor:pointer;color:var(--sl-color-text-accent);fill:currentColor}starlight-file-tree:where(.astro-p67cqifm) .directory>details>summary:hover~ul{border-color:var(--sl-color-gray-4)}starlight-file-tree:where(.astro-p67cqifm) .directory>details>summary:hover .highlight .tree-icon{color:var(--sl-color-text-invert);fill:currentColor}starlight-file-tree:where(.astro-p67cqifm) ul{margin-inline-start:.5rem;border-inline-start:1px solid var(--sl-color-gray-5);padding:0;padding-inline-start:.125rem;list-style:none}starlight-file-tree:where(.astro-p67cqifm)>ul{margin:0;border:0;padding:0}starlight-file-tree:where(.astro-p67cqifm) li{margin:var(--y-space) 0;padding:var(--y-pad) 0}starlight-file-tree:where(.astro-p67cqifm) .file{margin-inline-start:calc(var(--x-space) - .125rem);color:var(--sl-color-white)}starlight-file-tree:where(.astro-p67cqifm) .tree-entry{display:inline-flex;align-items:flex-start;flex-wrap:wrap;max-width:calc(100% - 1rem)}@media(min-width:30em){starlight-file-tree:where(.astro-p67cqifm) .tree-entry{flex-wrap:nowrap}}starlight-file-tree:where(.astro-p67cqifm) .tree-entry>:first-child{flex-shrink:0}starlight-file-tree:where(.astro-p67cqifm) .empty{color:var(--sl-color-gray-3);padding-inline-start:.375rem}starlight-file-tree:where(.astro-p67cqifm) .comment{color:var(--sl-color-gray-3);padding-inline-start:1.625rem;max-width:24rem;min-width:12rem}starlight-file-tree:where(.astro-p67cqifm) .highlight{display:inline-block;border-radius:.25rem;padding-inline-end:.5rem;color:var(--sl-color-text-invert);background-color:var(--sl-color-text-accent)}starlight-file-tree:where(.astro-p67cqifm) svg{display:inline;fill:var(--sl-color-gray-3);vertical-align:middle;margin-inline:.25rem .375rem;width:.875rem;height:.875rem}starlight-file-tree:where(.astro-p67cqifm) .highlight svg.tree-icon{fill:currentColor}}
@layer starlight.components{.sl-link-button:where(.astro-xwgiixxa){align-items:center;border:1px solid transparent;border-radius:999rem;display:inline-flex;font-size:var(--sl-text-sm);gap:.5em;line-height:1.1875;outline-offset:.25rem;padding:.4375rem 1.125rem;text-decoration:none}.sl-link-button:where(.astro-xwgiixxa).primary{background:var(--sl-color-text-accent);border-color:var(--sl-color-text-accent);color:var(--sl-color-black)}.sl-link-button:where(.astro-xwgiixxa).primary:hover{color:var(--sl-color-black)}.sl-link-button:where(.astro-xwgiixxa).secondary{border-color:inherit;color:var(--sl-color-white)}.sl-link-button:where(.astro-xwgiixxa).minimal{color:var(--sl-color-white);padding-inline:0}.sl-link-button:where(.astro-xwgiixxa) svg{flex-shrink:0}@media(min-width:50rem){.sl-link-button:where(.astro-xwgiixxa){font-size:var(--sl-text-base);padding:.9375rem 1.25rem}}.sl-markdown-content .sl-link-button:where(.astro-xwgiixxa){margin-inline-end:1rem}.sl-markdown-content .sl-link-button:where(.astro-xwgiixxa):not(:where(p *)){margin-block:1rem}}
</style><script type="module" src="/_astro/page.B1D-nYk3.js"></script></head> <body class="astro-bguv2lll"> <a href="#_top" class="astro-7q3lir66">Skip to content</a>  <div class="nova-page-frame astro-fwdtyf2y"> <header class="nova-page-frame-header astro-fwdtyf2y"> <div class="nova-header astro-zixgsetp"> <div class="nova-header-title astro-zixgsetp"> <span class="nova-site-title"><a href="/" class="site-title sl-flex astro-m46x6ez3">  <img class="light:sl-hidden print:hidden astro-m46x6ez3" alt src="/_astro/logo-white.B5DAh2NK.svg" width="971" height="119"> <img class="dark:sl-hidden print:block astro-m46x6ez3" alt src="/_astro/logo.ienR-kzb.svg" width="971" height="119"> <span class="sr-only astro-m46x6ez3" translate="no"> ScaleNinja </span> </a> </span> </div> <nav class="nova-header-nav astro-zixgsetp"> <a class="nova-header-nav-link astro-zixgsetp" href="/blog"> Blog </a><a class="nova-header-nav-link astro-zixgsetp" href="/contact/"> Contact </a> </nav> <div class="nova-header-search astro-zixgsetp"> <site-search class="astro-zixgsetp astro-ukakap6x" data-translations="{&#34;placeholder&#34;:&#34;Search&#34;}"> <button class="nova-search-button astro-ukakap6x" data-open-modal disabled aria-label="Search" aria-keyshortcuts="Control+K"> <span class="nova-search-button-icon astro-ukakap6x"></span> <span class="sl-hidden md:sl-block astro-ukakap6x" aria-hidden="true">Search</span> <kbd class="sl-hidden md:sl-flex astro-ukakap6x" style="display: none;"> <kbd class="astro-ukakap6x">Ctrl</kbd><kbd class="astro-ukakap6x">K</kbd> </kbd> </button> <dialog style="padding:0" aria-label="Search" class="astro-ukakap6x"> <div class="dialog-frame sl-flex astro-ukakap6x">  <button data-close-modal class="sl-flex md:sl-hidden astro-ukakap6x"> Cancel </button> <div class="search-container astro-ukakap6x"> <div id="starlight__search" class="astro-ukakap6x"></div> </div> </div> </dialog> </site-search>  <script>
  ;(() => {
    const openBtn = document.querySelector('button[data-open-modal]')
    const shortcut = openBtn?.querySelector('kbd')
    if (!openBtn || !(shortcut instanceof HTMLElement)) return
    const platformKey = shortcut.querySelector('kbd')
    if (platformKey && /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)) {
      platformKey.textContent = '⌘'
      openBtn.setAttribute('aria-keyshortcuts', 'Meta+K')
    }
    shortcut.style.display = ''
  })()
</script> <script type="module" src="/_astro/Search.astro_astro_type_script_index_0_lang.cjYDvRdi.js"></script>    </div> <div class="nova-header-actions-lg astro-zixgsetp"> <a href="https://github.com/scaleninja" rel="me" class="nova-icon-button"><span class="sr-only">GitHub</span><svg aria-hidden="true" class=" astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-color: currentColor;--sl-icon-size: 1rem;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg></a><a href="https://scaleninja.com/blog/rss.xml" rel="me" class="nova-icon-button"><span class="sr-only">RSS</span><svg aria-hidden="true" class=" astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-color: currentColor;--sl-icon-size: 1rem;"><path d="M2.88 16.88a3 3 0 0 0 0 4.24 3 3 0 0 0 4.24 0 3 3 0 0 0-4.24-4.24Zm2.83 2.83a1 1 0 0 1-1.42-1.42 1 1 0 0 1 1.42 0 1 1 0 0 1 0 1.42ZM5 12a1 1 0 0 0 0 2 5 5 0 0 1 5 5 1 1 0 0 0 2 0 7 7 0 0 0-7-7Zm0-4a1 1 0 0 0 0 2 9 9 0 0 1 9 9 1 1 0 0 0 2 0 11.08 11.08 0 0 0-3.22-7.78A11.08 11.08 0 0 0 5 8Zm10.61.39A15.11 15.11 0 0 0 5 4a1 1 0 0 0 0 2 13 13 0 0 1 13 13 1 1 0 0 0 2 0 15.11 15.11 0 0 0-4.39-10.61Z"/></svg></a> <script type="module">class s extends HTMLElement{constructor(){super();const e=this.querySelector("select");e&&(e.addEventListener("change",t=>{t.currentTarget instanceof HTMLSelectElement&&(window.location.pathname=t.currentTarget.value)}),window.addEventListener("pageshow",t=>{if(!t.persisted)return;const n=e.querySelector("option[selected]")?.index;n!==e.selectedIndex&&(e.selectedIndex=n??0)}))}}customElements.define("starlight-lang-select",s);</script> <div class="nova-theme-select"> <astro-theme-toggle class="nova-icon-button"> <div class="astro-theme-toggle-icon-light">  <div class="nova-theme-select-icon-light"></div>  </div> <div class="astro-theme-toggle-icon-dark">  <div class="nova-theme-select-icon-dark"></div>  </div> </astro-theme-toggle> <script type="module">function u(){return typeof window>"u"?"light":window.astroThemeToggle?.getTheme?.()||"light"}function f(t){typeof window>"u"||window.astroThemeToggle?.setTheme?.(t)}function w(){const t=u();f(t==="light"?"dark":"light")}const l="astro-theme-toggle-temporary-styles",p="::view-transition-old(root), ::view-transition-new(root) { animation: none; mix-blend-mode: normal; }";function c(){document.getElementById(l)?.remove()}function T(){c();const t=document.createElement("style");t.id=l,t.textContent=p,document.head.appendChild(t)}async function y(t,n,e){const i=document;if(typeof i.startViewTransition!="function"){t();return}T();const o=i.startViewTransition(()=>{t()});await o?.ready,o?.finished?.then(c);const a=.7,m=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 8 8"><defs><radialGradient id="toggle-theme-gradient"><stop offset="${a}"/><stop offset="1" stop-opacity="0"/></radialGradient></defs><circle cx="4" cy="4" r="4" fill="url(#toggle-theme-gradient)"/></svg>`,r=`data:image/svg+xml;base64,${window.btoa(m)}`,h=window.innerWidth,g=window.innerHeight,s=Math.ceil(Math.hypot(Math.max(n,h-n),Math.max(e,g-e))/a);document.documentElement.animate({maskImage:[`url('${r}')`,`url('${r}')`],maskRepeat:["no-repeat","no-repeat"],maskPosition:[`${n}px ${e}px`,`${n-s}px ${e-s}px`],maskSize:["0",`${2*s}px`]},{duration:500,easing:"ease-in",pseudoElement:"::view-transition-new(root)"})}function d(t){y(w,t.clientX,t.clientY)}class x extends HTMLElement{connectedCallback(){this.hasAttribute("tabindex")||this.setAttribute("tabindex","0"),this.hasAttribute("role")||this.setAttribute("role","button"),this.addEventListener("click",d),this.addEventListener("keydown",n=>{if(n.key==="Enter"||n.key===" "){n.preventDefault();const e=this.getBoundingClientRect(),i=e.left+e.width/2,o=e.top+e.height/2;d({clientX:i,clientY:o})}})}}customElements.define("astro-theme-toggle",x);</script>  </div> </div> <div class="nova-header-actions-sm astro-zixgsetp"> <nova-mobile-menu-toggle class="print:hidden nova-icon-button" aria-label="Menu" aria-controls="starlight__sidebar"> <div class="nova-mobile-menu-toggle-icon"></div> </nova-mobile-menu-toggle> <script type="module" src="/_astro/MobileMenuToggle.astro_astro_type_script_index_0_lang.BcleLLtf.js"></script> </div> </div>  <script type="module">document.querySelectorAll(".dropdown-trigger").forEach(o=>{o.addEventListener("click",e=>{const i=e.currentTarget.closest(".nav-dropdown")?.querySelector(".dropdown-menu");if(i){const t=i.style.visibility==="visible";i.style.visibility=t?"hidden":"visible",i.style.opacity=t?"0":"1"}})});document.addEventListener("keydown",o=>{o.key==="Escape"&&document.querySelectorAll(".dropdown-menu").forEach(e=>{e.style.visibility="hidden",e.style.opacity="0"})});</script> </header> <nav class="sidebar print:hidden astro-fwdtyf2y" aria-label="Main" id="nova-sidebar-nav"> <div id="starlight__sidebar" class="sidebar-pane nova-page-frame-sidebar-pane astro-fwdtyf2y"> <div class="sidebar-content sl-flex astro-fwdtyf2y"> <sl-sidebar-state-persist data-hash="05mhe5g" class="astro-kku4brbg"> <script aria-hidden="true">
		(() => {
			try {
				if (!matchMedia('(min-width: 50em)').matches) return;
				/** @type {HTMLElement | null} */
				const target = document.querySelector('sl-sidebar-state-persist');
				const state = JSON.parse(sessionStorage.getItem('sl-sidebar-state') || '0');
				if (!target || !state || target.dataset.hash !== state.hash) return;
				window._starlightScrollRestore = state.scroll;
				customElements.define(
					'sl-sidebar-restore',
					class SidebarRestore extends HTMLElement {
						connectedCallback() {
							try {
								const idx = parseInt(this.dataset.index || '');
								const details = this.closest('details');
								if (details && typeof state.open[idx] === 'boolean') details.open = state.open[idx];
							} catch {}
						}
					}
				);
			} catch {}
		})();
	</script>  <ul class="top-level astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/blog/" aria-current="false" class="large astro-3ii7xxms"> <span class="astro-3ii7xxms">All posts</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Featured posts</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="0"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/blog/cloudstack/" aria-current="page" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Apache CloudStack Ubuntu/KVM Guide for x86_64 and ARM64</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/blog/ceph/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Ceph Storage with CloudStack on Ubuntu/KVM</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Recent posts</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="1"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/blog/wireguard/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">Wireguard VPN and Hotspot/AP Guide</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">Tags</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="2"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/blog/tags/guide/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">guide (3)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/blog/tags/cloudstack/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">cloudstack (2)</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/blog/tags/ceph/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">ceph (1)</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/blog/rss.xml" aria-current="false" class="large astro-3ii7xxms"> <span class="astro-3ii7xxms">RSS</span>  </a> </li> </ul>   <script aria-hidden="true">
		(() => {
			const scroller = document.getElementById('starlight__sidebar');
			if (!window._starlightScrollRestore || !scroller) return;
			scroller.scrollTop = window._starlightScrollRestore;
			delete window._starlightScrollRestore;
		})();
	</script> </sl-sidebar-state-persist>  <div class="md:sl-hidden"> <div class="nova-mobile-menu-footer"> <a href="https://github.com/scaleninja" rel="me" class="nova-icon-button"><span class="sr-only">GitHub</span><svg aria-hidden="true" class=" astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-color: currentColor;--sl-icon-size: 1rem;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg></a><a href="https://scaleninja.com/blog/rss.xml" rel="me" class="nova-icon-button"><span class="sr-only">RSS</span><svg aria-hidden="true" class=" astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-color: currentColor;--sl-icon-size: 1rem;"><path d="M2.88 16.88a3 3 0 0 0 0 4.24 3 3 0 0 0 4.24 0 3 3 0 0 0-4.24-4.24Zm2.83 2.83a1 1 0 0 1-1.42-1.42 1 1 0 0 1 1.42 0 1 1 0 0 1 0 1.42ZM5 12a1 1 0 0 0 0 2 5 5 0 0 1 5 5 1 1 0 0 0 2 0 7 7 0 0 0-7-7Zm0-4a1 1 0 0 0 0 2 9 9 0 0 1 9 9 1 1 0 0 0 2 0 11.08 11.08 0 0 0-3.22-7.78A11.08 11.08 0 0 0 5 8Zm10.61.39A15.11 15.11 0 0 0 5 4a1 1 0 0 0 0 2 13 13 0 0 1 13 13 1 1 0 0 0 2 0 15.11 15.11 0 0 0-4.39-10.61Z"/></svg></a>  <div class="nova-theme-select"> <astro-theme-toggle class="nova-icon-button"> <div class="astro-theme-toggle-icon-light">  <div class="nova-theme-select-icon-light"></div>  </div> <div class="astro-theme-toggle-icon-dark">  <div class="nova-theme-select-icon-dark"></div>  </div> </astro-theme-toggle>   </div> </div> </div> </div> </div> </nav> <div class="main-frame astro-fwdtyf2y">  <script type="module">const a=document.getElementById("starlight__sidebar"),n=a?.querySelector("sl-sidebar-state-persist"),o="sl-sidebar-state",i=()=>{let t=[];const e=n?.dataset.hash||"";try{const s=sessionStorage.getItem(o),r=JSON.parse(s||"{}");Array.isArray(r.open)&&r.hash===e&&(t=r.open)}catch{}return{hash:e,open:t,scroll:a?.scrollTop||0}},c=t=>{try{sessionStorage.setItem(o,JSON.stringify(t))}catch{}},d=()=>c(i()),l=(t,e)=>{const s=i();s.open[e]=t,c(s)};n?.addEventListener("click",t=>{if(!(t.target instanceof Element))return;const e=t.target.closest("summary")?.closest("details");if(!e)return;const s=e.querySelector("sl-sidebar-restore"),r=parseInt(s?.dataset.index||"");isNaN(r)||l(!e.open,r)});addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&d()});addEventListener("pageHide",d);</script> <div class="lg:sl-flex astro-wxn7k47k"> <aside class="right-sidebar-container print:hidden astro-wxn7k47k"> <div class="right-sidebar astro-wxn7k47k"> <div class="lg:sl-hidden astro-pb3aqygn"><div class="nova-mobile-table-of-contents"><mobile-starlight-toc data-min-h="2" data-max-h="3" class="astro-doynk5tl"><nav aria-labelledby="starlight__on-this-page--mobile" class="astro-doynk5tl"><details id="starlight__mobile-toc" class="astro-doynk5tl"><summary id="starlight__on-this-page--mobile" class="sl-flex astro-doynk5tl"><span class="toggle sl-flex astro-doynk5tl">On this page<svg aria-hidden="true" class="caret astro-doynk5tl astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg></span><span class="display-current astro-doynk5tl"></span></summary><div class="dropdown astro-doynk5tl"><ul class="isMobile astro-g2bywc46" style="--depth: 0;"> <li class="astro-g2bywc46" style="--depth: 0;"> <a href="#_top" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#getting-started" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Getting Started</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#network-setup" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Network Setup</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#ubuntu-netplan-config" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Ubuntu Netplan Config</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#repo-setup" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Repo Setup</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#management-server-setup" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Management Server Setup</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#database-setup" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Database Setup</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#storage-setup" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Storage Setup</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#kvm-host-setup" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">KVM Host Setup</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#firewall-setup" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Firewall Setup</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#start-control-plane" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Start Control Plane</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#deploy-your-private-cloud" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Deploy Your Private Cloud</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#deploy-datacenter" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Deploy DataCenter</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#register-templates" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Register Templates</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#add-networks" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Add Networks</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#deploying-instance" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Deploying Instance</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#integrations" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Integrations</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#where-to-go-next" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Where to go next?</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#comments" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Comments</span> </a>  </li> </ul> </div></details></nav></mobile-starlight-toc><script type="module" src="/_astro/MobileTableOfContents.astro_astro_type_script_index_0_lang.C181hMzK.js"></script></div></div><div class="right-sidebar-panel sl-hidden lg:sl-block astro-pb3aqygn"><div class="sl-container astro-pb3aqygn"><starlight-toc data-min-h="2" data-max-h="3"><nav aria-labelledby="starlight__on-this-page"><h2 id="starlight__on-this-page">On this page</h2><ul class="astro-g2bywc46" style="--depth: 0;"> <li class="astro-g2bywc46" style="--depth: 0;"> <a href="#_top" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Overview</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#getting-started" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Getting Started</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#network-setup" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Network Setup</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#ubuntu-netplan-config" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Ubuntu Netplan Config</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#repo-setup" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Repo Setup</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#management-server-setup" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Management Server Setup</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#database-setup" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Database Setup</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#storage-setup" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Storage Setup</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#kvm-host-setup" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">KVM Host Setup</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#firewall-setup" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Firewall Setup</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#start-control-plane" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Start Control Plane</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#deploy-your-private-cloud" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Deploy Your Private Cloud</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#deploy-datacenter" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Deploy DataCenter</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#register-templates" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Register Templates</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#add-networks" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Add Networks</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#deploying-instance" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Deploying Instance</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#integrations" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Integrations</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#where-to-go-next" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Where to go next?</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#comments" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Comments</span> </a>  </li> </ul> </nav></starlight-toc><script type="module" src="/_astro/TableOfContents.astro_astro_type_script_index_0_lang.CKWWgpjV.js"></script></div></div> </div> </aside> <div class="main-pane astro-wxn7k47k">  <main data-pagefind-body class="astro-bguv2lll" lang="en" dir="ltr">    <div class="content-panel astro-7nkwcw3z"> <div class="sl-container astro-7nkwcw3z"> <h1 id="_top" class="astro-j6tvhyss">Apache CloudStack Ubuntu/KVM Guide for x86_64 and ARM64</h1>  </div> </div>  <div class="content-panel astro-7nkwcw3z"> <div class="sl-container astro-7nkwcw3z"> <div class="sl-markdown-content"><figure class="astro-ubv65s3q"> <img src="/_astro/rpi.CLTJaEFU_Z27rmyl.webp" alt="CloudStack RPi" loading="eager" decoding="async" fetchpriority="auto" width="728" height="337" class="astro-ubv65s3q">  </figure> <div class="metadata not-content astro-2oxtfctb"> <div class="dates astro-2oxtfctb"> <time datetime="2026-01-04T00:00:00.000Z" class="astro-2oxtfctb"> Jan 4, 2026 </time>  <span class="metadata-alt astro-2oxtfctb">  - 14 min read </span> <span class="metadata-alt astro-2oxtfctb">  - 2725 words </span> </div> <div class="authors astro-2oxtfctb"> <a href="https://yadv.in" class="author astro-kbhsbk7c"><img src="/_astro/rohit.CoXaunSd_QxcPV.webp" alt="Rohit Yadav" loading="eager" decoding="async" fetchpriority="auto" width="40" height="40" class="astro-kbhsbk7c"><div class="text astro-kbhsbk7c"> <div class="name astro-kbhsbk7c">Rohit Yadav</div>  </div> </a>  </div>  </div>   <aside aria-label="Note" class="starlight-aside starlight-aside--caution"><p class="starlight-aside__title" aria-hidden="true"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="starlight-aside__icon"><path d="M12 16C11.8022 16 11.6089 16.0587 11.4444 16.1686C11.28 16.2784 11.1518 16.4346 11.0761 16.6173C11.0004 16.8001 10.9806 17.0011 11.0192 17.1951C11.0578 17.3891 11.153 17.5673 11.2929 17.7071C11.4327 17.847 11.6109 17.9422 11.8049 17.9808C11.9989 18.0194 12.2 17.9996 12.3827 17.9239C12.5654 17.8482 12.7216 17.72 12.8315 17.5556C12.9413 17.3911 13 17.1978 13 17C13 16.7348 12.8946 16.4805 12.7071 16.2929C12.5196 16.1054 12.2652 16 12 16ZM22.67 17.47L14.62 3.47003C14.3598 3.00354 13.9798 2.61498 13.5192 2.3445C13.0586 2.07401 12.5341 1.9314 12 1.9314C11.4659 1.9314 10.9414 2.07401 10.4808 2.3445C10.0202 2.61498 9.64019 3.00354 9.38 3.47003L1.38 17.47C1.11079 17.924 0.966141 18.441 0.960643 18.9688C0.955144 19.4966 1.089 20.0166 1.34868 20.4761C1.60837 20.9356 1.9847 21.3185 2.43968 21.5861C2.89466 21.8536 3.41218 21.9964 3.94 22H20.06C20.5921 22.0053 21.1159 21.8689 21.5779 21.6049C22.0399 21.341 22.4234 20.9589 22.689 20.4978C22.9546 20.0368 23.0928 19.5134 23.0895 18.9814C23.0862 18.4493 22.9414 17.9277 22.67 17.47ZM20.94 19.47C20.8523 19.626 20.7245 19.7556 20.5697 19.8453C20.4149 19.935 20.2389 19.9815 20.06 19.98H3.94C3.76111 19.9815 3.5851 19.935 3.43032 19.8453C3.27553 19.7556 3.14765 19.626 3.06 19.47C2.97223 19.318 2.92602 19.1456 2.92602 18.97C2.92602 18.7945 2.97223 18.622 3.06 18.47L11.06 4.47003C11.1439 4.30623 11.2714 4.16876 11.4284 4.07277C11.5855 3.97678 11.766 3.92599 11.95 3.92599C12.134 3.92599 12.3145 3.97678 12.4716 4.07277C12.6286 4.16876 12.7561 4.30623 12.84 4.47003L20.89 18.47C20.9892 18.6199 21.0462 18.7937 21.055 18.9732C21.0638 19.1527 21.0241 19.3312 20.94 19.49V19.47ZM12 8.00003C11.7348 8.00003 11.4804 8.10538 11.2929 8.29292C11.1054 8.48046 11 8.73481 11 9.00003V13C11 13.2652 11.1054 13.5196 11.2929 13.7071C11.4804 13.8947 11.7348 14 12 14C12.2652 14 12.5196 13.8947 12.7071 13.7071C12.8946 13.5196 13 13.2652 13 13V9.00003C13 8.73481 12.8946 8.48046 12.7071 8.29292C12.5196 8.10538 12.2652 8.00003 12 8.00003Z"></path></svg>Note</p><div class="starlight-aside__content"><p>This guide was updated for <code dir="auto">Apache CloudStack v4.22</code> and tested on x86_64 and ARM64 hosts such
as Intel NUCs, Beelink AMD mini-PCs, Dell rack servers, Raspberry Pi 4/5 and
Ampere Ultra servers.</p><p>This guide may get outdated in future, please <a href="http://docs.cloudstack.apache.org/en/latest/installguide">refer to the project’s install
guide</a> and
<a href="http://docs.cloudstack.apache.org/en/latest/installguide/hypervisor/kvm.html">docs on KVM host installation</a>.</p></div></aside>
<p>This guide covers the installation and build of Apache CloudStack IaaS cloud on
Ubuntu using KVM, for both x86_64 and ARM64 architectures.</p>
<p>If you’re new to Apache CloudStack, here a video for you:
<a href="https://www.youtube.com/watch?v=pASzZR57V_8">CloudStack 101: The Best Way to Build Your Private Cloud</a></p>
<iframe width="100%" height="480" src="https://www.youtube.com/embed/pASzZR57V_8" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
<p hidden><!-- excerpt --></p>
<aside aria-label="Tip" class="starlight-aside starlight-aside--tip"><p class="starlight-aside__title" aria-hidden="true"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="starlight-aside__icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.43909 8.85483L1.44039 8.85354L4.96668 5.33815C5.30653 4.99386 5.7685 4.79662 6.2524 4.78972L6.26553 4.78963L12.9014 4.78962L13.8479 3.84308C16.9187 0.772319 20.0546 0.770617 21.4678 0.975145C21.8617 1.02914 22.2271 1.21053 22.5083 1.4917C22.7894 1.77284 22.9708 2.13821 23.0248 2.53199C23.2294 3.94517 23.2278 7.08119 20.1569 10.1521L19.2107 11.0983V17.7338L19.2106 17.7469C19.2037 18.2308 19.0067 18.6933 18.6624 19.0331L15.1456 22.5608C14.9095 22.7966 14.6137 22.964 14.29 23.0449C13.9663 23.1259 13.6267 23.1174 13.3074 23.0204C12.9881 22.9235 12.7011 22.7417 12.4771 22.4944C12.2533 22.2473 12.1006 21.9441 12.0355 21.6171L11.1783 17.3417L6.65869 12.822L4.34847 12.3589L2.38351 11.965C2.05664 11.8998 1.75272 11.747 1.50564 11.5232C1.25835 11.2992 1.07653 11.0122 0.979561 10.6929C0.882595 10.3736 0.874125 10.034 0.955057 9.7103C1.03599 9.38659 1.20328 9.09092 1.43909 8.85483ZM6.8186 10.8724L2.94619 10.096L6.32006 6.73268H10.9583L6.8186 10.8724ZM15.2219 5.21703C17.681 2.75787 20.0783 2.75376 21.1124 2.8876C21.2462 3.92172 21.2421 6.31895 18.783 8.77812L12.0728 15.4883L8.51172 11.9272L15.2219 5.21703ZM13.9042 21.0538L13.1279 17.1811L17.2676 13.0414V17.68L13.9042 21.0538Z"></path><path d="M9.31827 18.3446C9.45046 17.8529 9.17864 17.3369 8.68945 17.1724C8.56178 17.1294 8.43145 17.1145 8.30512 17.1243C8.10513 17.1398 7.91519 17.2172 7.76181 17.3434C7.62613 17.455 7.51905 17.6048 7.45893 17.7835C6.97634 19.2186 5.77062 19.9878 4.52406 20.4029C4.08525 20.549 3.6605 20.644 3.29471 20.7053C3.35607 20.3395 3.45098 19.9148 3.59711 19.476C4.01221 18.2294 4.78141 17.0237 6.21648 16.5411C6.39528 16.481 6.54504 16.3739 6.65665 16.2382C6.85126 16.0016 6.92988 15.678 6.84417 15.3647C6.83922 15.3466 6.83373 15.3286 6.82767 15.3106C6.74106 15.053 6.55701 14.8557 6.33037 14.7459C6.10949 14.6389 5.84816 14.615 5.59715 14.6994C5.47743 14.7397 5.36103 14.7831 5.24786 14.8294C3.22626 15.6569 2.2347 17.4173 1.75357 18.8621C1.49662 19.6337 1.36993 20.3554 1.30679 20.8818C1.27505 21.1464 1.25893 21.3654 1.25072 21.5213C1.24662 21.5993 1.24448 21.6618 1.24337 21.7066L1.243 21.7226L1.24235 21.7605L1.2422 21.7771L1.24217 21.7827L1.24217 21.7856C1.24217 22.3221 1.67703 22.7579 2.2137 22.7579L2.2155 22.7579L2.22337 22.7578L2.23956 22.7577C2.25293 22.7575 2.27096 22.7572 2.29338 22.7567C2.33821 22.7555 2.40073 22.7534 2.47876 22.7493C2.63466 22.7411 2.85361 22.725 3.11822 22.6932C3.64462 22.6301 4.36636 22.5034 5.13797 22.2464C6.58274 21.7653 8.3431 20.7738 9.17063 18.7522C9.21696 18.639 9.26037 18.5226 9.30064 18.4029C9.30716 18.3835 9.31304 18.364 9.31827 18.3446Z"></path></svg>Tip</p><div class="starlight-aside__content"><p>Users new to Apache CloudStack can also try the new console-based one-line installer: <a href="https://github.com/apache/cloudstack-installer">https://github.com/apache/cloudstack-installer</a></p></div></aside>
<div class="sl-heading-wrapper level-h2"><h2 id="getting-started">Getting Started</h2><a class="sl-anchor-link" href="#getting-started"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Getting Started”</span></a></div>
<p>First install Ubuntu 24.04/later LTS on your x86_64 or
<a href="https://ubuntu.com/download/raspberry-pi">ARM64</a> system.</p>
<aside aria-label="Note" class="starlight-aside starlight-aside--note"><p class="starlight-aside__title" aria-hidden="true"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="starlight-aside__icon"><path d="M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z"></path></svg>Note</p><div class="starlight-aside__content"><p>Ensure Intel VT-X or AMD-V is available and enabled on the x86_64 hosts,
preferably with 16 GB RAM or more.</p></div></aside>
<aside aria-label="Caution" class="starlight-aside starlight-aside--caution"><p class="starlight-aside__title" aria-hidden="true"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="starlight-aside__icon"><path d="M12 16C11.8022 16 11.6089 16.0587 11.4444 16.1686C11.28 16.2784 11.1518 16.4346 11.0761 16.6173C11.0004 16.8001 10.9806 17.0011 11.0192 17.1951C11.0578 17.3891 11.153 17.5673 11.2929 17.7071C11.4327 17.847 11.6109 17.9422 11.8049 17.9808C11.9989 18.0194 12.2 17.9996 12.3827 17.9239C12.5654 17.8482 12.7216 17.72 12.8315 17.5556C12.9413 17.3911 13 17.1978 13 17C13 16.7348 12.8946 16.4805 12.7071 16.2929C12.5196 16.1054 12.2652 16 12 16ZM22.67 17.47L14.62 3.47003C14.3598 3.00354 13.9798 2.61498 13.5192 2.3445C13.0586 2.07401 12.5341 1.9314 12 1.9314C11.4659 1.9314 10.9414 2.07401 10.4808 2.3445C10.0202 2.61498 9.64019 3.00354 9.38 3.47003L1.38 17.47C1.11079 17.924 0.966141 18.441 0.960643 18.9688C0.955144 19.4966 1.089 20.0166 1.34868 20.4761C1.60837 20.9356 1.9847 21.3185 2.43968 21.5861C2.89466 21.8536 3.41218 21.9964 3.94 22H20.06C20.5921 22.0053 21.1159 21.8689 21.5779 21.6049C22.0399 21.341 22.4234 20.9589 22.689 20.4978C22.9546 20.0368 23.0928 19.5134 23.0895 18.9814C23.0862 18.4493 22.9414 17.9277 22.67 17.47ZM20.94 19.47C20.8523 19.626 20.7245 19.7556 20.5697 19.8453C20.4149 19.935 20.2389 19.9815 20.06 19.98H3.94C3.76111 19.9815 3.5851 19.935 3.43032 19.8453C3.27553 19.7556 3.14765 19.626 3.06 19.47C2.97223 19.318 2.92602 19.1456 2.92602 18.97C2.92602 18.7945 2.97223 18.622 3.06 18.47L11.06 4.47003C11.1439 4.30623 11.2714 4.16876 11.4284 4.07277C11.5855 3.97678 11.766 3.92599 11.95 3.92599C12.134 3.92599 12.3145 3.97678 12.4716 4.07277C12.6286 4.16876 12.7561 4.30623 12.84 4.47003L20.89 18.47C20.9892 18.6199 21.0462 18.7937 21.055 18.9732C21.0638 19.1527 21.0241 19.3312 20.94 19.49V19.47ZM12 8.00003C11.7348 8.00003 11.4804 8.10538 11.2929 8.29292C11.1054 8.48046 11 8.73481 11 9.00003V13C11 13.2652 11.1054 13.5196 11.2929 13.7071C11.4804 13.8947 11.7348 14 12 14C12.2652 14 12.5196 13.8947 12.7071 13.7071C12.8946 13.5196 13 13.2652 13 13V9.00003C13 8.73481 12.8946 8.48046 12.7071 8.29292C12.5196 8.10538 12.2652 8.00003 12 8.00003Z"></path></svg>Caution</p><div class="starlight-aside__content"><p>On ARM64 hosts, ensure 64-bit mode and GIC may need to be enabled in some
systems, such as on Raspberry Pi 4/5:</p><div data-nova-code-container="" data-nova-code-title="/boot/firmware/config.txt" class="nova-code-container not-content"><div class="nova-code-title">/boot/firmware/config.txt</div><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="astro" dir="ltr"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">[all]</span></span>
<span class="line highlighted"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">arm_64bit=1</span></span>
<span class="line highlighted"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">enable_gic=1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7"># NVME speed config</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">dtparam=nvme</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">dtparam=pciex1_1=gen3</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">dtparam=pciex1_gen=3</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7"># Current config</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">usb_max_current_enable=1</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">max_usb_current=1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">dtoverlay=vc4-kms-v3d</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">disable_fw_kms_setup=1</span></span></code></pre><nova-code-copy-button type="button" data-code="[all]
arm_64bit=1
enable_gic=1

# NVME speed config
dtparam=nvme
dtparam=pciex1_1=gen3
dtparam=pciex1_gen=3

# Current config
usb_max_current_enable=1
max_usb_current=1

dtoverlay=vc4-kms-v3d
disable_fw_kms_setup=1" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div></div></aside>
<p>Ensure that the <code dir="auto">universe</code> repository is enabled in <code dir="auto">/etc/apt/sources.list</code>.</p>
<p>Install basic packages:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sh" dir="ltr"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> openntpd</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> openssh-server</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> htop</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> tar</span></span></code></pre><nova-code-copy-button type="button" data-code="apt-get install openntpd openssh-server sudo vim htop tar" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<p>Ensure that KVM is available at <code dir="auto">/dev/kvm</code> or by running kvm-ok:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sh" dir="ltr"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> cpu-checker</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">kvm-ok</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">INFO:</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /dev/kvm</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> exists</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">KVM</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> acceleration</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> can</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> be</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> used</span></span></code></pre><nova-code-copy-button type="button" data-code="apt-get install cpu-checker

kvm-ok
INFO: /dev/kvm exists
KVM acceleration can be used" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<p>Optional: Intel based systems may benefit from CPU microcode install/update:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sh" dir="ltr"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> intel-microcode</span></span></code></pre><nova-code-copy-button type="button" data-code="apt-get install intel-microcode" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<p>Allow the root user for ssh access using password, fix <code dir="auto">/etc/ssh/sshd_config</code> to
set <code dir="auto">PermitRootLogin yes</code> and restart ssh using <code dir="auto">systemctl restart ssh</code>.</p>
<p>Change and remember the <code dir="auto">root</code> password:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sh" dir="ltr"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">passwd</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> root</span></span></code></pre><nova-code-copy-button type="button" data-code="passwd root" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<div class="sl-heading-wrapper level-h2"><h2 id="network-setup">Network Setup</h2><a class="sl-anchor-link" href="#network-setup"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Network Setup”</span></a></div>
<p>Next, setup host networking using Linux bridges that can handle CloudStack’s
public, guest, management and storage traffic. For simplicity, a single bridge
<code dir="auto">cloudbr0</code> can be used for all traffic types on the same physical network. Install
bridge utilities using:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sh" dir="ltr"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> bridge-utils</span></span></code></pre><nova-code-copy-button type="button" data-code="apt-get install bridge-utils" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<p>This guide assumes that you’re in a 192.168.1.0/24 network which is a typical
RFC1918 private network.</p>
<div class="sl-heading-wrapper level-h3"><h3 id="ubuntu-netplan-config">Ubuntu Netplan Config</h3><a class="sl-anchor-link" href="#ubuntu-netplan-config"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Ubuntu Netplan Config”</span></a></div>
<p>Starting Ubuntu bionic, admins can use <code dir="auto">netplan</code> to configure networking. The
default installation creates a file at <code dir="auto">/etc/netplan/50-cloud-init.yaml</code> that
you should comment, and create a file at <code dir="auto">/etc/netplan/01-netcfg.yaml</code> applying
your network and interface/name specific changes:</p>
<div data-nova-code-container="" data-nova-code-title="/etc/netplan/01-netcfg.yaml" class="nova-code-container not-content"><div class="nova-code-title">/etc/netplan/01-netcfg.yaml</div><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="astro" dir="ltr"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">     network:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">       version: 2</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">       renderer: networkd</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">       ethernets:</span></span>
<span class="line highlighted"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">         eno1:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">           dhcp4: false</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">           dhcp6: false</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">           optional: true</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">       bridges:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">         cloudbr0:</span></span>
<span class="line highlighted"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">           addresses: [192.168.1.10/24]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">           routes:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">            - to: default</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">              via: 192.168.1.1</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">           nameservers:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">             addresses: [1.1.1.1, 8.8.8.8]</span></span>
<span class="line highlighted"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">           interfaces: [eno1]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">           dhcp4: false</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">           dhcp6: false</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">           parameters:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">             stp: false</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">             forward-delay: 0</span></span></code></pre><nova-code-copy-button type="button" data-code="     network:
       version: 2
       renderer: networkd
       ethernets:
         eno1:
           dhcp4: false
           dhcp6: false
           optional: true
       bridges:
         cloudbr0:
           addresses: [192.168.1.10/24]
           routes:
            - to: default
              via: 192.168.1.1
           nameservers:
             addresses: [1.1.1.1, 8.8.8.8]
           interfaces: [eno1]
           dhcp4: false
           dhcp6: false
           parameters:
             stp: false
             forward-delay: 0" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<aside aria-label="Note" class="starlight-aside starlight-aside--note"><p class="starlight-aside__title" aria-hidden="true"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="starlight-aside__icon"><path d="M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z"></path></svg>Note</p><div class="starlight-aside__content"><p>You may need to replace <code dir="auto">eno1</code> with the name of the physical NIC on your host,
and replace the <code dir="auto">192.168.1.10/24</code> to the IP address of your host.</p></div></aside>
<aside aria-label="Tip" class="starlight-aside starlight-aside--tip"><p class="starlight-aside__title" aria-hidden="true"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="starlight-aside__icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.43909 8.85483L1.44039 8.85354L4.96668 5.33815C5.30653 4.99386 5.7685 4.79662 6.2524 4.78972L6.26553 4.78963L12.9014 4.78962L13.8479 3.84308C16.9187 0.772319 20.0546 0.770617 21.4678 0.975145C21.8617 1.02914 22.2271 1.21053 22.5083 1.4917C22.7894 1.77284 22.9708 2.13821 23.0248 2.53199C23.2294 3.94517 23.2278 7.08119 20.1569 10.1521L19.2107 11.0983V17.7338L19.2106 17.7469C19.2037 18.2308 19.0067 18.6933 18.6624 19.0331L15.1456 22.5608C14.9095 22.7966 14.6137 22.964 14.29 23.0449C13.9663 23.1259 13.6267 23.1174 13.3074 23.0204C12.9881 22.9235 12.7011 22.7417 12.4771 22.4944C12.2533 22.2473 12.1006 21.9441 12.0355 21.6171L11.1783 17.3417L6.65869 12.822L4.34847 12.3589L2.38351 11.965C2.05664 11.8998 1.75272 11.747 1.50564 11.5232C1.25835 11.2992 1.07653 11.0122 0.979561 10.6929C0.882595 10.3736 0.874125 10.034 0.955057 9.7103C1.03599 9.38659 1.20328 9.09092 1.43909 8.85483ZM6.8186 10.8724L2.94619 10.096L6.32006 6.73268H10.9583L6.8186 10.8724ZM15.2219 5.21703C17.681 2.75787 20.0783 2.75376 21.1124 2.8876C21.2462 3.92172 21.2421 6.31895 18.783 8.77812L12.0728 15.4883L8.51172 11.9272L15.2219 5.21703ZM13.9042 21.0538L13.1279 17.1811L17.2676 13.0414V17.68L13.9042 21.0538Z"></path><path d="M9.31827 18.3446C9.45046 17.8529 9.17864 17.3369 8.68945 17.1724C8.56178 17.1294 8.43145 17.1145 8.30512 17.1243C8.10513 17.1398 7.91519 17.2172 7.76181 17.3434C7.62613 17.455 7.51905 17.6048 7.45893 17.7835C6.97634 19.2186 5.77062 19.9878 4.52406 20.4029C4.08525 20.549 3.6605 20.644 3.29471 20.7053C3.35607 20.3395 3.45098 19.9148 3.59711 19.476C4.01221 18.2294 4.78141 17.0237 6.21648 16.5411C6.39528 16.481 6.54504 16.3739 6.65665 16.2382C6.85126 16.0016 6.92988 15.678 6.84417 15.3647C6.83922 15.3466 6.83373 15.3286 6.82767 15.3106C6.74106 15.053 6.55701 14.8557 6.33037 14.7459C6.10949 14.6389 5.84816 14.615 5.59715 14.6994C5.47743 14.7397 5.36103 14.7831 5.24786 14.8294C3.22626 15.6569 2.2347 17.4173 1.75357 18.8621C1.49662 19.6337 1.36993 20.3554 1.30679 20.8818C1.27505 21.1464 1.25893 21.3654 1.25072 21.5213C1.24662 21.5993 1.24448 21.6618 1.24337 21.7066L1.243 21.7226L1.24235 21.7605L1.2422 21.7771L1.24217 21.7827L1.24217 21.7856C1.24217 22.3221 1.67703 22.7579 2.2137 22.7579L2.2155 22.7579L2.22337 22.7578L2.23956 22.7577C2.25293 22.7575 2.27096 22.7572 2.29338 22.7567C2.33821 22.7555 2.40073 22.7534 2.47876 22.7493C2.63466 22.7411 2.85361 22.725 3.11822 22.6932C3.64462 22.6301 4.36636 22.5034 5.13797 22.2464C6.58274 21.7653 8.3431 20.7738 9.17063 18.7522C9.21696 18.639 9.26037 18.5226 9.30064 18.4029C9.30716 18.3835 9.31304 18.364 9.31827 18.3446Z"></path></svg>Tip</p><div class="starlight-aside__content"><p>If you want to use VXLAN based traffic isolation, make sure to increase the MTU
setting of the physical nics by <code dir="auto">50 bytes</code> (because VXLAN header size is 50
bytes). For example, see below:</p></div></aside>
<div data-nova-code-container="" data-nova-code-title="/etc/netplan/01-netcfg.yaml" class="nova-code-container not-content"><div class="nova-code-title">/etc/netplan/01-netcfg.yaml</div><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="astro" dir="ltr"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">  ethernets:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">    eno1:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">      match:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">        macaddress: 00:01:2e:4f:f7:d0</span></span>
<span class="line highlighted"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">      mtu: 1550</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">      dhcp4: false</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">      dhcp6: false</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">    enp3s0:</span></span>
<span class="line highlighted"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">      mtu: 1550</span></span></code></pre><nova-code-copy-button type="button" data-code="  ethernets:
    eno1:
      match:
        macaddress: 00:01:2e:4f:f7:d0
      mtu: 1550
      dhcp4: false
      dhcp6: false
    enp3s0:
      mtu: 1550" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<p>Apply network config and reboot/re-ssh:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sh" dir="ltr"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">netplan</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> generate</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">netplan</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> apply</span></span></code></pre><nova-code-copy-button type="button" data-code="netplan generate
netplan apply" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<div class="sl-heading-wrapper level-h2"><h2 id="repo-setup">Repo Setup</h2><a class="sl-anchor-link" href="#repo-setup"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Repo Setup”</span></a></div>
<p>Setup the repository on your Ubuntu host:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sh" dir="ltr"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /etc/apt/keyrings</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">wget</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -O-</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> http://packages.shapeblue.com/release.asc</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50"> gpg</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --dearmor</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067"> |</span><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50"> sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> tee</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /etc/apt/keyrings/cloudstack.gpg</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067"> ></span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /dev/null</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#6CB6FF">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> deb</span><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7"> [signed-by=/etc/apt/keyrings/cloudstack.gpg] http://packages.shapeblue.com/cloudstack/upstream/debian/4.22 / </span><span style="--shiki-light:#383A42;--shiki-dark:#F47067">></span><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7"> /etc/apt/sources.list.d/cloudstack.list</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> update</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -y</span></span></code></pre><nova-code-copy-button type="button" data-code="mkdir -p /etc/apt/keyrings
wget -O- http://packages.shapeblue.com/release.asc | gpg --dearmor | sudo tee /etc/apt/keyrings/cloudstack.gpg > /dev/null

echo deb [signed-by=/etc/apt/keyrings/cloudstack.gpg] http://packages.shapeblue.com/cloudstack/upstream/debian/4.22 / > /etc/apt/sources.list.d/cloudstack.list
apt-get update -y" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<p>This should be run on all hosts where CloudStack software packages (management
server, usage server, agent etc) needs to be installed, esp if you’ve multiple hosts.</p>
<div class="sl-heading-wrapper level-h2"><h2 id="management-server-setup">Management Server Setup</h2><a class="sl-anchor-link" href="#management-server-setup"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Management Server Setup”</span></a></div>
<p>Install CloudStack management server and MySQL server: (run as root, once the CloudStack repository is setup)</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sh" dir="ltr"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> update</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -y</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> cloudstack-management</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> mysql-server</span></span></code></pre><nova-code-copy-button type="button" data-code="apt-get update -y
apt-get install cloudstack-management mysql-server" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<p>Optionally, if you want usage server you can run:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sh" dir="ltr"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> cloudstack-usage</span></span></code></pre><nova-code-copy-button type="button" data-code="apt-get install cloudstack-usage" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<div class="sl-heading-wrapper level-h2"><h2 id="database-setup">Database Setup</h2><a class="sl-anchor-link" href="#database-setup"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Database Setup”</span></a></div>
<p>Make a note of the MySQL server’s root user password. Configure InnoDB settings
in mysql server’s <code dir="auto">/etc/mysql/mysql.conf.d/mysqld.cnf</code>:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sql" dir="ltr"><code><span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">[mysqld]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">server_id </span><span style="--shiki-light:#383A42;--shiki-dark:#F47067">=</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> 1</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F47067">sql</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">mode</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF">"STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION,ERROR_FOR_DIVISION_BY_ZERO,NO_ZERO_DATE,NO_ZERO_IN_DATE,NO_ENGINE_SUBSTITUTION"</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">innodb_rollback_on_timeout</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067">=</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF">1</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">innodb_lock_wait_timeout</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067">=</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF">600</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">max_connections</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067">=</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF">1000</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#F47067">log</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">bin</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">mysql</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">bin</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">binlog</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">format </span><span style="--shiki-light:#383A42;--shiki-dark:#F47067">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> 'ROW'</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">#</span><span style="--shiki-light:#A626A4;--shiki-dark:#F47067">default</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067">-</span><span style="--shiki-light:#A626A4;--shiki-dark:#F47067">authentication</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067">-</span><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">plugin</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">mysql_native_password</span></span></code></pre><nova-code-copy-button type="button" data-code="[mysqld]

server_id = 1
sql-mode=&#x22;STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION,ERROR_FOR_DIVISION_BY_ZERO,NO_ZERO_DATE,NO_ZERO_IN_DATE,NO_ENGINE_SUBSTITUTION&#x22;
innodb_rollback_on_timeout=1
innodb_lock_wait_timeout=600
max_connections=1000
log-bin=mysql-bin
binlog-format = &#x27;ROW&#x27;

#default-authentication-plugin=mysql_native_password" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<p>Restart MySQL server and setup database:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sh" dir="ltr"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> mysql</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">cloudstack-setup-databases</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> cloud:cloud@localhost</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --deploy-as=root:</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -i</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> 192.168.1.10</span></span></code></pre><nova-code-copy-button type="button" data-code="systemctl restart mysql
cloudstack-setup-databases cloud:cloud@localhost --deploy-as=root: -i 192.168.1.10" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<aside aria-label="Note" class="starlight-aside starlight-aside--note"><p class="starlight-aside__title" aria-hidden="true"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="starlight-aside__icon"><path d="M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z"></path></svg>Note</p><div class="starlight-aside__content"><p>Note the <code dir="auto">-i</code> flag in the <code dir="auto">cloudstack-setup-databases</code> command to override the IP address of the management server host if that’s something different than what it detects automatically. The <code dir="auto">--deploy-as</code> typically has <code dir="auto">root</code> password, in this example its blank as root password is blank.</p></div></aside>
<div class="sl-heading-wrapper level-h2"><h2 id="storage-setup">Storage Setup</h2><a class="sl-anchor-link" href="#storage-setup"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Storage Setup”</span></a></div>
<p>Install NFS server:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sh" dir="ltr"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> nfs-kernel-server</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> quota</span></span></code></pre><nova-code-copy-button type="button" data-code="apt-get install nfs-kernel-server quota" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<p>Create exports:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sh" dir="ltr"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#6CB6FF">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> "/export  *(rw,async,no_root_squash,no_subtree_check)"</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067"> ></span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /etc/exports</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">mkdir</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /export/primary</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /export/secondary</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">exportfs</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -a</span></span></code></pre><nova-code-copy-button type="button" data-code="echo &#x22;/export  *(rw,async,no_root_squash,no_subtree_check)&#x22; > /etc/exports
mkdir -p /export/primary /export/secondary
exportfs -a" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<aside aria-label="Tip" class="starlight-aside starlight-aside--tip"><p class="starlight-aside__title" aria-hidden="true"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="starlight-aside__icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.43909 8.85483L1.44039 8.85354L4.96668 5.33815C5.30653 4.99386 5.7685 4.79662 6.2524 4.78972L6.26553 4.78963L12.9014 4.78962L13.8479 3.84308C16.9187 0.772319 20.0546 0.770617 21.4678 0.975145C21.8617 1.02914 22.2271 1.21053 22.5083 1.4917C22.7894 1.77284 22.9708 2.13821 23.0248 2.53199C23.2294 3.94517 23.2278 7.08119 20.1569 10.1521L19.2107 11.0983V17.7338L19.2106 17.7469C19.2037 18.2308 19.0067 18.6933 18.6624 19.0331L15.1456 22.5608C14.9095 22.7966 14.6137 22.964 14.29 23.0449C13.9663 23.1259 13.6267 23.1174 13.3074 23.0204C12.9881 22.9235 12.7011 22.7417 12.4771 22.4944C12.2533 22.2473 12.1006 21.9441 12.0355 21.6171L11.1783 17.3417L6.65869 12.822L4.34847 12.3589L2.38351 11.965C2.05664 11.8998 1.75272 11.747 1.50564 11.5232C1.25835 11.2992 1.07653 11.0122 0.979561 10.6929C0.882595 10.3736 0.874125 10.034 0.955057 9.7103C1.03599 9.38659 1.20328 9.09092 1.43909 8.85483ZM6.8186 10.8724L2.94619 10.096L6.32006 6.73268H10.9583L6.8186 10.8724ZM15.2219 5.21703C17.681 2.75787 20.0783 2.75376 21.1124 2.8876C21.2462 3.92172 21.2421 6.31895 18.783 8.77812L12.0728 15.4883L8.51172 11.9272L15.2219 5.21703ZM13.9042 21.0538L13.1279 17.1811L17.2676 13.0414V17.68L13.9042 21.0538Z"></path><path d="M9.31827 18.3446C9.45046 17.8529 9.17864 17.3369 8.68945 17.1724C8.56178 17.1294 8.43145 17.1145 8.30512 17.1243C8.10513 17.1398 7.91519 17.2172 7.76181 17.3434C7.62613 17.455 7.51905 17.6048 7.45893 17.7835C6.97634 19.2186 5.77062 19.9878 4.52406 20.4029C4.08525 20.549 3.6605 20.644 3.29471 20.7053C3.35607 20.3395 3.45098 19.9148 3.59711 19.476C4.01221 18.2294 4.78141 17.0237 6.21648 16.5411C6.39528 16.481 6.54504 16.3739 6.65665 16.2382C6.85126 16.0016 6.92988 15.678 6.84417 15.3647C6.83922 15.3466 6.83373 15.3286 6.82767 15.3106C6.74106 15.053 6.55701 14.8557 6.33037 14.7459C6.10949 14.6389 5.84816 14.615 5.59715 14.6994C5.47743 14.7397 5.36103 14.7831 5.24786 14.8294C3.22626 15.6569 2.2347 17.4173 1.75357 18.8621C1.49662 19.6337 1.36993 20.3554 1.30679 20.8818C1.27505 21.1464 1.25893 21.3654 1.25072 21.5213C1.24662 21.5993 1.24448 21.6618 1.24337 21.7066L1.243 21.7226L1.24235 21.7605L1.2422 21.7771L1.24217 21.7827L1.24217 21.7856C1.24217 22.3221 1.67703 22.7579 2.2137 22.7579L2.2155 22.7579L2.22337 22.7578L2.23956 22.7577C2.25293 22.7575 2.27096 22.7572 2.29338 22.7567C2.33821 22.7555 2.40073 22.7534 2.47876 22.7493C2.63466 22.7411 2.85361 22.725 3.11822 22.6932C3.64462 22.6301 4.36636 22.5034 5.13797 22.2464C6.58274 21.7653 8.3431 20.7738 9.17063 18.7522C9.21696 18.639 9.26037 18.5226 9.30064 18.4029C9.30716 18.3835 9.31304 18.364 9.31827 18.3446Z"></path></svg>Tip</p><div class="starlight-aside__content"><p>The <code dir="auto">/export</code> may even be a different disk or external storage, in which case you can format and mount it via <code dir="auto">/etc/fstab</code>.</p></div></aside>
<p>Configure and restart NFS server:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sh" dir="ltr"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">sed</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -i</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -e</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> 's/^RPCMOUNTDOPTS="--manage-gids"$/RPCMOUNTDOPTS="-p 892 --manage-gids"/g'</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /etc/default/nfs-kernel-server</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">sed</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -i</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -e</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> 's/^STATDOPTS=$/STATDOPTS="--port 662 --outgoing-port 2020"/g'</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /etc/default/nfs-common</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#6CB6FF">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> "NEED_STATD=yes"</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067"> >></span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /etc/default/nfs-common</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">sed</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -i</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -e</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> 's/^RPCRQUOTADOPTS=$/RPCRQUOTADOPTS="-p 875"/g'</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /etc/default/quota</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">service</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> nfs-kernel-server</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> restart</span></span></code></pre><nova-code-copy-button type="button" data-code="sed -i -e &#x27;s/^RPCMOUNTDOPTS=&#x22;--manage-gids&#x22;$/RPCMOUNTDOPTS=&#x22;-p 892 --manage-gids&#x22;/g&#x27; /etc/default/nfs-kernel-server
sed -i -e &#x27;s/^STATDOPTS=$/STATDOPTS=&#x22;--port 662 --outgoing-port 2020&#x22;/g&#x27; /etc/default/nfs-common
echo &#x22;NEED_STATD=yes&#x22; >> /etc/default/nfs-common
sed -i -e &#x27;s/^RPCRQUOTADOPTS=$/RPCRQUOTADOPTS=&#x22;-p 875&#x22;/g&#x27; /etc/default/quota
service nfs-kernel-server restart" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<aside aria-label="Caution" class="starlight-aside starlight-aside--caution"><p class="starlight-aside__title" aria-hidden="true"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="starlight-aside__icon"><path d="M12 16C11.8022 16 11.6089 16.0587 11.4444 16.1686C11.28 16.2784 11.1518 16.4346 11.0761 16.6173C11.0004 16.8001 10.9806 17.0011 11.0192 17.1951C11.0578 17.3891 11.153 17.5673 11.2929 17.7071C11.4327 17.847 11.6109 17.9422 11.8049 17.9808C11.9989 18.0194 12.2 17.9996 12.3827 17.9239C12.5654 17.8482 12.7216 17.72 12.8315 17.5556C12.9413 17.3911 13 17.1978 13 17C13 16.7348 12.8946 16.4805 12.7071 16.2929C12.5196 16.1054 12.2652 16 12 16ZM22.67 17.47L14.62 3.47003C14.3598 3.00354 13.9798 2.61498 13.5192 2.3445C13.0586 2.07401 12.5341 1.9314 12 1.9314C11.4659 1.9314 10.9414 2.07401 10.4808 2.3445C10.0202 2.61498 9.64019 3.00354 9.38 3.47003L1.38 17.47C1.11079 17.924 0.966141 18.441 0.960643 18.9688C0.955144 19.4966 1.089 20.0166 1.34868 20.4761C1.60837 20.9356 1.9847 21.3185 2.43968 21.5861C2.89466 21.8536 3.41218 21.9964 3.94 22H20.06C20.5921 22.0053 21.1159 21.8689 21.5779 21.6049C22.0399 21.341 22.4234 20.9589 22.689 20.4978C22.9546 20.0368 23.0928 19.5134 23.0895 18.9814C23.0862 18.4493 22.9414 17.9277 22.67 17.47ZM20.94 19.47C20.8523 19.626 20.7245 19.7556 20.5697 19.8453C20.4149 19.935 20.2389 19.9815 20.06 19.98H3.94C3.76111 19.9815 3.5851 19.935 3.43032 19.8453C3.27553 19.7556 3.14765 19.626 3.06 19.47C2.97223 19.318 2.92602 19.1456 2.92602 18.97C2.92602 18.7945 2.97223 18.622 3.06 18.47L11.06 4.47003C11.1439 4.30623 11.2714 4.16876 11.4284 4.07277C11.5855 3.97678 11.766 3.92599 11.95 3.92599C12.134 3.92599 12.3145 3.97678 12.4716 4.07277C12.6286 4.16876 12.7561 4.30623 12.84 4.47003L20.89 18.47C20.9892 18.6199 21.0462 18.7937 21.055 18.9732C21.0638 19.1527 21.0241 19.3312 20.94 19.49V19.47ZM12 8.00003C11.7348 8.00003 11.4804 8.10538 11.2929 8.29292C11.1054 8.48046 11 8.73481 11 9.00003V13C11 13.2652 11.1054 13.5196 11.2929 13.7071C11.4804 13.8947 11.7348 14 12 14C12.2652 14 12.5196 13.8947 12.7071 13.7071C12.8946 13.5196 13 13.2652 13 13V9.00003C13 8.73481 12.8946 8.48046 12.7071 8.29292C12.5196 8.10538 12.2652 8.00003 12 8.00003Z"></path></svg>Caution</p><div class="starlight-aside__content"><p>For ARM64 hosts, seed an appropriate arm64 based systemvm template manually from
the management server for the specific CloudStack version, for example for 4.22:</p><div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sh" dir="ltr"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">wget</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> http://download.cloudstack.org/systemvm/4.22/systemvmtemplate-4.22.0-aarch64-kvm.qcow2.bz2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">/usr/share/cloudstack-common/scripts/storage/secondary/cloud-install-sys-tmplt</span><span style="--shiki-light:#0184BC;--shiki-dark:#F47067"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF">          -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /export/secondary</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> systemvmtemplate-4.22.0-aarch64-kvm.qcow2.bz2</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -h</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> kvm</span><span style="--shiki-light:#0184BC;--shiki-dark:#F47067"> \</span></span>
<span class="line"><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF">          -o</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> localhost</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -r</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> cloud</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -d</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> cloud</span></span></code></pre><nova-code-copy-button type="button" data-code="wget http://download.cloudstack.org/systemvm/4.22/systemvmtemplate-4.22.0-aarch64-kvm.qcow2.bz2
/usr/share/cloudstack-common/scripts/storage/secondary/cloud-install-sys-tmplt \
          -m /export/secondary -f systemvmtemplate-4.22.0-aarch64-kvm.qcow2.bz2 -h kvm \
          -o localhost -r cloud -d cloud" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div><p>Future, CloudStack releases are working towards automating installation and
upgrades of ARM64 systemvmtemplates.</p></div></aside>
<div class="sl-heading-wrapper level-h2"><h2 id="kvm-host-setup">KVM Host Setup</h2><a class="sl-anchor-link" href="#kvm-host-setup"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “KVM Host Setup”</span></a></div>
<aside aria-label="Tip" class="starlight-aside starlight-aside--tip"><p class="starlight-aside__title" aria-hidden="true"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="starlight-aside__icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.43909 8.85483L1.44039 8.85354L4.96668 5.33815C5.30653 4.99386 5.7685 4.79662 6.2524 4.78972L6.26553 4.78963L12.9014 4.78962L13.8479 3.84308C16.9187 0.772319 20.0546 0.770617 21.4678 0.975145C21.8617 1.02914 22.2271 1.21053 22.5083 1.4917C22.7894 1.77284 22.9708 2.13821 23.0248 2.53199C23.2294 3.94517 23.2278 7.08119 20.1569 10.1521L19.2107 11.0983V17.7338L19.2106 17.7469C19.2037 18.2308 19.0067 18.6933 18.6624 19.0331L15.1456 22.5608C14.9095 22.7966 14.6137 22.964 14.29 23.0449C13.9663 23.1259 13.6267 23.1174 13.3074 23.0204C12.9881 22.9235 12.7011 22.7417 12.4771 22.4944C12.2533 22.2473 12.1006 21.9441 12.0355 21.6171L11.1783 17.3417L6.65869 12.822L4.34847 12.3589L2.38351 11.965C2.05664 11.8998 1.75272 11.747 1.50564 11.5232C1.25835 11.2992 1.07653 11.0122 0.979561 10.6929C0.882595 10.3736 0.874125 10.034 0.955057 9.7103C1.03599 9.38659 1.20328 9.09092 1.43909 8.85483ZM6.8186 10.8724L2.94619 10.096L6.32006 6.73268H10.9583L6.8186 10.8724ZM15.2219 5.21703C17.681 2.75787 20.0783 2.75376 21.1124 2.8876C21.2462 3.92172 21.2421 6.31895 18.783 8.77812L12.0728 15.4883L8.51172 11.9272L15.2219 5.21703ZM13.9042 21.0538L13.1279 17.1811L17.2676 13.0414V17.68L13.9042 21.0538Z"></path><path d="M9.31827 18.3446C9.45046 17.8529 9.17864 17.3369 8.68945 17.1724C8.56178 17.1294 8.43145 17.1145 8.30512 17.1243C8.10513 17.1398 7.91519 17.2172 7.76181 17.3434C7.62613 17.455 7.51905 17.6048 7.45893 17.7835C6.97634 19.2186 5.77062 19.9878 4.52406 20.4029C4.08525 20.549 3.6605 20.644 3.29471 20.7053C3.35607 20.3395 3.45098 19.9148 3.59711 19.476C4.01221 18.2294 4.78141 17.0237 6.21648 16.5411C6.39528 16.481 6.54504 16.3739 6.65665 16.2382C6.85126 16.0016 6.92988 15.678 6.84417 15.3647C6.83922 15.3466 6.83373 15.3286 6.82767 15.3106C6.74106 15.053 6.55701 14.8557 6.33037 14.7459C6.10949 14.6389 5.84816 14.615 5.59715 14.6994C5.47743 14.7397 5.36103 14.7831 5.24786 14.8294C3.22626 15.6569 2.2347 17.4173 1.75357 18.8621C1.49662 19.6337 1.36993 20.3554 1.30679 20.8818C1.27505 21.1464 1.25893 21.3654 1.25072 21.5213C1.24662 21.5993 1.24448 21.6618 1.24337 21.7066L1.243 21.7226L1.24235 21.7605L1.2422 21.7771L1.24217 21.7827L1.24217 21.7856C1.24217 22.3221 1.67703 22.7579 2.2137 22.7579L2.2155 22.7579L2.22337 22.7578L2.23956 22.7577C2.25293 22.7575 2.27096 22.7572 2.29338 22.7567C2.33821 22.7555 2.40073 22.7534 2.47876 22.7493C2.63466 22.7411 2.85361 22.725 3.11822 22.6932C3.64462 22.6301 4.36636 22.5034 5.13797 22.2464C6.58274 21.7653 8.3431 20.7738 9.17063 18.7522C9.21696 18.639 9.26037 18.5226 9.30064 18.4029C9.30716 18.3835 9.31304 18.364 9.31827 18.3446Z"></path></svg>Tip</p><div class="starlight-aside__content"><p>Configure the <a href="#repo-setup">CloudStack repo</a> on your KVM host if it’s not the management server host</p></div></aside>
<p>Install KVM and CloudStack agent, configure libvirt:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sh" dir="ltr"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> qemu-kvm</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> cloudstack-agent</span></span></code></pre><nova-code-copy-button type="button" data-code="apt-get install qemu-kvm cloudstack-agent" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<p>Enable VNC for console proxy:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sh" dir="ltr"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">sed</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -i</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -e</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> 's/\#vnc_listen.*$/vnc_listen = "0.0.0.0"/g'</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /etc/libvirt/qemu.conf</span></span></code></pre><nova-code-copy-button type="button" data-code="sed -i -e &#x27;s/\#vnc_listen.*$/vnc_listen = &#x22;0.0.0.0&#x22;/g&#x27; /etc/libvirt/qemu.conf" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<p>On Ubuntu 22.04/24.04 or later, add <code dir="auto">LIBVIRTD_ARGS="--listen"</code> to <code dir="auto">/etc/default/libvirtd</code>:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sh" dir="ltr"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#6CB6FF">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> LIBVIRTD_ARGS=</span><span style="--shiki-light:#0184BC;--shiki-dark:#F47067">\"</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF">--listen</span><span style="--shiki-light:#0184BC;--shiki-dark:#F47067">\"</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067"> >></span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /etc/default/libvirtd</span></span></code></pre><nova-code-copy-button type="button" data-code="echo LIBVIRTD_ARGS=\&#x22;--listen\&#x22; >> /etc/default/libvirtd" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<p>The traditional socket/listen based configuration may not be supported with
CloudStack, we can get the old behaviour using following:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sh" dir="ltr"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> mask</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> libvirtd.socket</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> libvirtd-ro.socket</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> libvirtd-admin.socket</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> libvirtd-tls.socket</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> libvirtd-tcp.socket</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> libvirtd</span></span></code></pre><nova-code-copy-button type="button" data-code="systemctl mask libvirtd.socket libvirtd-ro.socket libvirtd-admin.socket libvirtd-tls.socket libvirtd-tcp.socket
systemctl restart libvirtd" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<p>Configure libvirt to connect to libvirtd and not to per-driver daemons, especially important on newer distros
such as Ubuntu 24.04 (and EL9) by editing the <code dir="auto">/etc/libvirt/libvirt.conf</code> and adding the following:</p>
<div data-nova-code-container="" data-nova-code-title="/etc/libvirt/libvirt.conf" class="nova-code-container not-content"><div class="nova-code-title">/etc/libvirt/libvirt.conf</div><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="astro" dir="ltr"><code><span class="line highlighted"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">remote_mode="legacy"</span></span></code></pre><nova-code-copy-button type="button" data-code="remote_mode=&#x22;legacy&#x22;" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<p>Configure default libvirtd config:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sh" dir="ltr"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#6CB6FF">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> 'listen_tls=0'</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067"> >></span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /etc/libvirt/libvirtd.conf</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#6CB6FF">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> 'listen_tcp=1'</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067"> >></span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /etc/libvirt/libvirtd.conf</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#6CB6FF">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> 'tcp_port = "16509"'</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067"> >></span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /etc/libvirt/libvirtd.conf</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#6CB6FF">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> 'mdns_adv = 0'</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067"> >></span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /etc/libvirt/libvirtd.conf</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#6CB6FF">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> 'auth_tcp = "none"'</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067"> >></span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /etc/libvirt/libvirtd.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> libvirtd</span></span></code></pre><nova-code-copy-button type="button" data-code="echo &#x27;listen_tls=0&#x27; >> /etc/libvirt/libvirtd.conf
echo &#x27;listen_tcp=1&#x27; >> /etc/libvirt/libvirtd.conf
echo &#x27;tcp_port = &#x22;16509&#x22;&#x27; >> /etc/libvirt/libvirtd.conf
echo &#x27;mdns_adv = 0&#x27; >> /etc/libvirt/libvirtd.conf
echo &#x27;auth_tcp = &#x22;none&#x22;&#x27; >> /etc/libvirt/libvirtd.conf
systemctl restart libvirtd" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<aside aria-label="Note" class="starlight-aside starlight-aside--note"><p class="starlight-aside__title" aria-hidden="true"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="starlight-aside__icon"><path d="M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z"></path></svg>Note</p><div class="starlight-aside__content"><p>The above libvirtd configuration is just for initial setup, when you add the KVM
host in CloudStack by default the host will be configured to use a more secure
mTLS configuration.</p></div></aside>
<aside aria-label="Danger" class="starlight-aside starlight-aside--danger"><p class="starlight-aside__title" aria-hidden="true"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="starlight-aside__icon"><path d="M12 7C11.7348 7 11.4804 7.10536 11.2929 7.29289C11.1054 7.48043 11 7.73478 11 8V12C11 12.2652 11.1054 12.5196 11.2929 12.7071C11.4804 12.8946 11.7348 13 12 13C12.2652 13 12.5196 12.8946 12.7071 12.7071C12.8946 12.5196 13 12.2652 13 12V8C13 7.73478 12.8946 7.48043 12.7071 7.29289C12.5196 7.10536 12.2652 7 12 7ZM12 15C11.8022 15 11.6089 15.0586 11.4444 15.1685C11.28 15.2784 11.1518 15.4346 11.0761 15.6173C11.0004 15.8 10.9806 16.0011 11.0192 16.1951C11.0578 16.3891 11.153 16.5673 11.2929 16.7071C11.4327 16.847 11.6109 16.9422 11.8049 16.9808C11.9989 17.0194 12.2 16.9996 12.3827 16.9239C12.5654 16.8482 12.7216 16.72 12.8315 16.5556C12.9414 16.3911 13 16.1978 13 16C13 15.7348 12.8946 15.4804 12.7071 15.2929C12.5196 15.1054 12.2652 15 12 15ZM21.71 7.56L16.44 2.29C16.2484 2.10727 15.9948 2.00368 15.73 2H8.27C8.00523 2.00368 7.75163 2.10727 7.56 2.29L2.29 7.56C2.10727 7.75163 2.00368 8.00523 2 8.27V15.73C2.00368 15.9948 2.10727 16.2484 2.29 16.44L7.56 21.71C7.75163 21.8927 8.00523 21.9963 8.27 22H15.73C15.9948 21.9963 16.2484 21.8927 16.44 21.71L21.71 16.44C21.8927 16.2484 21.9963 15.9948 22 15.73V8.27C21.9963 8.00523 21.8927 7.75163 21.71 7.56ZM20 15.31L15.31 20H8.69L4 15.31V8.69L8.69 4H15.31L20 8.69V15.31Z"></path></svg>Danger</p><div class="starlight-aside__content"><p>On ARM64 hosts, please ensure the following options are set in the
<code dir="auto">/etc/cloudstack/agent/agent.properties</code>: (you may need to check/re-add these for
your KVM host, post zone deployment)</p><div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="plaintext" dir="ltr"><code><span class="line"><span>guest.cpu.arch=aarch64</span></span>
<span class="line"><span>guest.cpu.mode=host-passthrough</span></span>
<span class="line"><span>host.cpu.manual.speed.mhz=1500</span></span></code></pre><nova-code-copy-button type="button" data-code="guest.cpu.arch=aarch64
guest.cpu.mode=host-passthrough
host.cpu.manual.speed.mhz=1500" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div><p>The <code dir="auto">host.cpu.manual.speed.mhz</code> must be configured because Linux on ARM64 isn’t
able to report the correct CPU speed on some ARM64 hosts.</p><p>By default 1GB of host memory is reserved for agent/host usage, which you can
change/reduce it using the following in the agent.properties file, for example:</p><div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="plaintext" dir="ltr"><code><span class="line"><span>host.reserved.mem.mb=800</span></span></code></pre><nova-code-copy-button type="button" data-code="host.reserved.mem.mb=800" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div></div></aside>
<aside aria-label="Caution" class="starlight-aside starlight-aside--caution"><p class="starlight-aside__title" aria-hidden="true"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="starlight-aside__icon"><path d="M12 16C11.8022 16 11.6089 16.0587 11.4444 16.1686C11.28 16.2784 11.1518 16.4346 11.0761 16.6173C11.0004 16.8001 10.9806 17.0011 11.0192 17.1951C11.0578 17.3891 11.153 17.5673 11.2929 17.7071C11.4327 17.847 11.6109 17.9422 11.8049 17.9808C11.9989 18.0194 12.2 17.9996 12.3827 17.9239C12.5654 17.8482 12.7216 17.72 12.8315 17.5556C12.9413 17.3911 13 17.1978 13 17C13 16.7348 12.8946 16.4805 12.7071 16.2929C12.5196 16.1054 12.2652 16 12 16ZM22.67 17.47L14.62 3.47003C14.3598 3.00354 13.9798 2.61498 13.5192 2.3445C13.0586 2.07401 12.5341 1.9314 12 1.9314C11.4659 1.9314 10.9414 2.07401 10.4808 2.3445C10.0202 2.61498 9.64019 3.00354 9.38 3.47003L1.38 17.47C1.11079 17.924 0.966141 18.441 0.960643 18.9688C0.955144 19.4966 1.089 20.0166 1.34868 20.4761C1.60837 20.9356 1.9847 21.3185 2.43968 21.5861C2.89466 21.8536 3.41218 21.9964 3.94 22H20.06C20.5921 22.0053 21.1159 21.8689 21.5779 21.6049C22.0399 21.341 22.4234 20.9589 22.689 20.4978C22.9546 20.0368 23.0928 19.5134 23.0895 18.9814C23.0862 18.4493 22.9414 17.9277 22.67 17.47ZM20.94 19.47C20.8523 19.626 20.7245 19.7556 20.5697 19.8453C20.4149 19.935 20.2389 19.9815 20.06 19.98H3.94C3.76111 19.9815 3.5851 19.935 3.43032 19.8453C3.27553 19.7556 3.14765 19.626 3.06 19.47C2.97223 19.318 2.92602 19.1456 2.92602 18.97C2.92602 18.7945 2.97223 18.622 3.06 18.47L11.06 4.47003C11.1439 4.30623 11.2714 4.16876 11.4284 4.07277C11.5855 3.97678 11.766 3.92599 11.95 3.92599C12.134 3.92599 12.3145 3.97678 12.4716 4.07277C12.6286 4.16876 12.7561 4.30623 12.84 4.47003L20.89 18.47C20.9892 18.6199 21.0462 18.7937 21.055 18.9732C21.0638 19.1527 21.0241 19.3312 20.94 19.49V19.47ZM12 8.00003C11.7348 8.00003 11.4804 8.10538 11.2929 8.29292C11.1054 8.48046 11 8.73481 11 9.00003V13C11 13.2652 11.1054 13.5196 11.2929 13.7071C11.4804 13.8947 11.7348 14 12 14C12.2652 14 12.5196 13.8947 12.7071 13.7071C12.8946 13.5196 13 13.2652 13 13V9.00003C13 8.73481 12.8946 8.48046 12.7071 8.29292C12.5196 8.10538 12.2652 8.00003 12 8.00003Z"></path></svg>Caution</p><div class="starlight-aside__content"><p>On certain hosts where you may be running docker and other services, you may
need to add the following in <code dir="auto">/etc/sysctl.conf</code> and then run <code dir="auto">sysctl -p</code>:</p><div data-nova-code-container="" data-nova-code-title="/etc/sysctl.conf" class="nova-code-container not-content"><div class="nova-code-title">/etc/sysctl.conf</div><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="astro" dir="ltr"><code><span class="line highlighted"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">net.bridge.bridge-nf-call-arptables = 0</span></span>
<span class="line highlighted"><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">net.bridge.bridge-nf-call-iptables = 0</span></span></code></pre><nova-code-copy-button type="button" data-code="net.bridge.bridge-nf-call-arptables = 0
net.bridge.bridge-nf-call-iptables = 0" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div><div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sh" dir="ltr"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">sysctl</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -p</span></span></code></pre><nova-code-copy-button type="button" data-code="sysctl -p" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div></div></aside>
<aside aria-label="Tip" class="starlight-aside starlight-aside--tip"><p class="starlight-aside__title" aria-hidden="true"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="starlight-aside__icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.43909 8.85483L1.44039 8.85354L4.96668 5.33815C5.30653 4.99386 5.7685 4.79662 6.2524 4.78972L6.26553 4.78963L12.9014 4.78962L13.8479 3.84308C16.9187 0.772319 20.0546 0.770617 21.4678 0.975145C21.8617 1.02914 22.2271 1.21053 22.5083 1.4917C22.7894 1.77284 22.9708 2.13821 23.0248 2.53199C23.2294 3.94517 23.2278 7.08119 20.1569 10.1521L19.2107 11.0983V17.7338L19.2106 17.7469C19.2037 18.2308 19.0067 18.6933 18.6624 19.0331L15.1456 22.5608C14.9095 22.7966 14.6137 22.964 14.29 23.0449C13.9663 23.1259 13.6267 23.1174 13.3074 23.0204C12.9881 22.9235 12.7011 22.7417 12.4771 22.4944C12.2533 22.2473 12.1006 21.9441 12.0355 21.6171L11.1783 17.3417L6.65869 12.822L4.34847 12.3589L2.38351 11.965C2.05664 11.8998 1.75272 11.747 1.50564 11.5232C1.25835 11.2992 1.07653 11.0122 0.979561 10.6929C0.882595 10.3736 0.874125 10.034 0.955057 9.7103C1.03599 9.38659 1.20328 9.09092 1.43909 8.85483ZM6.8186 10.8724L2.94619 10.096L6.32006 6.73268H10.9583L6.8186 10.8724ZM15.2219 5.21703C17.681 2.75787 20.0783 2.75376 21.1124 2.8876C21.2462 3.92172 21.2421 6.31895 18.783 8.77812L12.0728 15.4883L8.51172 11.9272L15.2219 5.21703ZM13.9042 21.0538L13.1279 17.1811L17.2676 13.0414V17.68L13.9042 21.0538Z"></path><path d="M9.31827 18.3446C9.45046 17.8529 9.17864 17.3369 8.68945 17.1724C8.56178 17.1294 8.43145 17.1145 8.30512 17.1243C8.10513 17.1398 7.91519 17.2172 7.76181 17.3434C7.62613 17.455 7.51905 17.6048 7.45893 17.7835C6.97634 19.2186 5.77062 19.9878 4.52406 20.4029C4.08525 20.549 3.6605 20.644 3.29471 20.7053C3.35607 20.3395 3.45098 19.9148 3.59711 19.476C4.01221 18.2294 4.78141 17.0237 6.21648 16.5411C6.39528 16.481 6.54504 16.3739 6.65665 16.2382C6.85126 16.0016 6.92988 15.678 6.84417 15.3647C6.83922 15.3466 6.83373 15.3286 6.82767 15.3106C6.74106 15.053 6.55701 14.8557 6.33037 14.7459C6.10949 14.6389 5.84816 14.615 5.59715 14.6994C5.47743 14.7397 5.36103 14.7831 5.24786 14.8294C3.22626 15.6569 2.2347 17.4173 1.75357 18.8621C1.49662 19.6337 1.36993 20.3554 1.30679 20.8818C1.27505 21.1464 1.25893 21.3654 1.25072 21.5213C1.24662 21.5993 1.24448 21.6618 1.24337 21.7066L1.243 21.7226L1.24235 21.7605L1.2422 21.7771L1.24217 21.7827L1.24217 21.7856C1.24217 22.3221 1.67703 22.7579 2.2137 22.7579L2.2155 22.7579L2.22337 22.7578L2.23956 22.7577C2.25293 22.7575 2.27096 22.7572 2.29338 22.7567C2.33821 22.7555 2.40073 22.7534 2.47876 22.7493C2.63466 22.7411 2.85361 22.725 3.11822 22.6932C3.64462 22.6301 4.36636 22.5034 5.13797 22.2464C6.58274 21.7653 8.3431 20.7738 9.17063 18.7522C9.21696 18.639 9.26037 18.5226 9.30064 18.4029C9.30716 18.3835 9.31304 18.364 9.31827 18.3446Z"></path></svg>Tip</p><div class="starlight-aside__content"><p>Optional: If you’re using a non-compliant server vendor or virtual environment,
in some cases you may need to configure unique host ID for libvirt:</p><div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sh" dir="ltr"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> uuid</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#ADBAC7">UUID</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">uuid</span><span style="--shiki-light:#383A42;--shiki-dark:#ADBAC7">)</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#6CB6FF">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> host_uuid</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> =</span><span style="--shiki-light:#0184BC;--shiki-dark:#F47067"> \"</span><span style="--shiki-light:#E45649;--shiki-dark:#ADBAC7">$UUID</span><span style="--shiki-light:#0184BC;--shiki-dark:#F47067">\"</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067"> >></span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /etc/libvirt/libvirtd.conf</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> libvirtd</span></span></code></pre><nova-code-copy-button type="button" data-code="apt-get install uuid
UUID=$(uuid)
echo host_uuid = \&#x22;$UUID\&#x22; >> /etc/libvirt/libvirtd.conf
systemctl restart libvirtd" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div></div></aside>
<div class="sl-heading-wrapper level-h2"><h2 id="firewall-setup">Firewall Setup</h2><a class="sl-anchor-link" href="#firewall-setup"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Firewall Setup”</span></a></div>
<p>By default <code dir="auto">ufw</code> may be disabled and this may not be required. If your system
uses <code dir="auto">ufw</code> (you can check using <code dir="auto">ufw status</code>), you may run the following:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sh" dir="ltr"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">    ufw</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> allow</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> mysql</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">    ufw</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> allow</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> proto</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> tcp</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> any</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> any</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> port</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> 22</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">    ufw</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> allow</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> proto</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> tcp</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> any</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> any</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> port</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> 1798</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">    ufw</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> allow</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> proto</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> tcp</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> any</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> any</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> port</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> 16509</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">    ufw</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> allow</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> proto</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> tcp</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> any</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> any</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> port</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> 16514</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">    ufw</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> allow</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> proto</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> tcp</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> any</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> any</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> 5900:6100</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">    ufw</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> allow</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> proto</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> tcp</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> from</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> any</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> any</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> 49152:49216</span></span></code></pre><nova-code-copy-button type="button" data-code="    ufw allow mysql
    ufw allow proto tcp from any to any port 22
    ufw allow proto tcp from any to any port 1798
    ufw allow proto tcp from any to any port 16509
    ufw allow proto tcp from any to any port 16514
    ufw allow proto tcp from any to any port 5900:6100
    ufw allow proto tcp from any to any port 49152:49216" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<p>Alternatively, you can configure firewall rules using iptables for your
management network:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sh" dir="ltr"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit">    # configure firewall rules to allow useful ports</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#ADBAC7">    NETWORK</span><span style="--shiki-light:#383A42;--shiki-dark:#F47067">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF">192.168.1.0/24</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">    iptables</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -s</span><span style="--shiki-light:#E45649;--shiki-dark:#ADBAC7"> $NETWORK</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> state</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --state</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> NEW</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> udp</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --dport</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> 111</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> ACCEPT</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">    iptables</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -s</span><span style="--shiki-light:#E45649;--shiki-dark:#ADBAC7"> $NETWORK</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> state</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --state</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> NEW</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --dport</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> 111</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> ACCEPT</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">    iptables</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -s</span><span style="--shiki-light:#E45649;--shiki-dark:#ADBAC7"> $NETWORK</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> state</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --state</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> NEW</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --dport</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> 2049</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> ACCEPT</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">    iptables</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -s</span><span style="--shiki-light:#E45649;--shiki-dark:#ADBAC7"> $NETWORK</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> state</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --state</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> NEW</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --dport</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> 32803</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> ACCEPT</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">    iptables</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -s</span><span style="--shiki-light:#E45649;--shiki-dark:#ADBAC7"> $NETWORK</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> state</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --state</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> NEW</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> udp</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --dport</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> 32769</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> ACCEPT</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">    iptables</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -s</span><span style="--shiki-light:#E45649;--shiki-dark:#ADBAC7"> $NETWORK</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> state</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --state</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> NEW</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --dport</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> 892</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> ACCEPT</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">    iptables</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -s</span><span style="--shiki-light:#E45649;--shiki-dark:#ADBAC7"> $NETWORK</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> state</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --state</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> NEW</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --dport</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> 875</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> ACCEPT</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">    iptables</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -s</span><span style="--shiki-light:#E45649;--shiki-dark:#ADBAC7"> $NETWORK</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> state</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --state</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> NEW</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --dport</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> 662</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> ACCEPT</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">    iptables</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -s</span><span style="--shiki-light:#E45649;--shiki-dark:#ADBAC7"> $NETWORK</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> state</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --state</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> NEW</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --dport</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> 8250</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> ACCEPT</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">    iptables</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -s</span><span style="--shiki-light:#E45649;--shiki-dark:#ADBAC7"> $NETWORK</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> state</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --state</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> NEW</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --dport</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> 8080</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> ACCEPT</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">    iptables</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -s</span><span style="--shiki-light:#E45649;--shiki-dark:#ADBAC7"> $NETWORK</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> state</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --state</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> NEW</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --dport</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> 9090</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> ACCEPT</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">    iptables</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -A</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> INPUT</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -s</span><span style="--shiki-light:#E45649;--shiki-dark:#ADBAC7"> $NETWORK</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -m</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> state</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --state</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> NEW</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -p</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> tcp</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> --dport</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> 16514</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -j</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> ACCEPT</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">    apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> iptables-persistent</span></span></code></pre><nova-code-copy-button type="button" data-code="    # configure firewall rules to allow useful ports
    NETWORK=192.168.1.0/24
    iptables -A INPUT -s $NETWORK -m state --state NEW -p udp --dport 111 -j ACCEPT
    iptables -A INPUT -s $NETWORK -m state --state NEW -p tcp --dport 111 -j ACCEPT
    iptables -A INPUT -s $NETWORK -m state --state NEW -p tcp --dport 2049 -j ACCEPT
    iptables -A INPUT -s $NETWORK -m state --state NEW -p tcp --dport 32803 -j ACCEPT
    iptables -A INPUT -s $NETWORK -m state --state NEW -p udp --dport 32769 -j ACCEPT
    iptables -A INPUT -s $NETWORK -m state --state NEW -p tcp --dport 892 -j ACCEPT
    iptables -A INPUT -s $NETWORK -m state --state NEW -p tcp --dport 875 -j ACCEPT
    iptables -A INPUT -s $NETWORK -m state --state NEW -p tcp --dport 662 -j ACCEPT
    iptables -A INPUT -s $NETWORK -m state --state NEW -p tcp --dport 8250 -j ACCEPT
    iptables -A INPUT -s $NETWORK -m state --state NEW -p tcp --dport 8080 -j ACCEPT
    iptables -A INPUT -s $NETWORK -m state --state NEW -p tcp --dport 9090 -j ACCEPT
    iptables -A INPUT -s $NETWORK -m state --state NEW -p tcp --dport 16514 -j ACCEPT

    apt-get install iptables-persistent" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<p>You must check and disable apparmour:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sh" dir="ltr"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit"># Disable apparmour on libvirtd</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">ln</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /etc/apparmor.d/usr.sbin.libvirtd</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /etc/apparmor.d/disable/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">ln</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -s</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /etc/apparmor.d/usr.lib.libvirt.virt-aa-helper</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /etc/apparmor.d/disable/</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">apparmor_parser</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -R</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /etc/apparmor.d/usr.sbin.libvirtd</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">apparmor_parser</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -R</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /etc/apparmor.d/usr.lib.libvirt.virt-aa-helper</span></span></code></pre><nova-code-copy-button type="button" data-code="# Disable apparmour on libvirtd
ln -s /etc/apparmor.d/usr.sbin.libvirtd /etc/apparmor.d/disable/
ln -s /etc/apparmor.d/usr.lib.libvirt.virt-aa-helper /etc/apparmor.d/disable/
apparmor_parser -R /etc/apparmor.d/usr.sbin.libvirtd
apparmor_parser -R /etc/apparmor.d/usr.lib.libvirt.virt-aa-helper" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<div class="sl-heading-wrapper level-h2"><h2 id="start-control-plane">Start Control Plane</h2><a class="sl-anchor-link" href="#start-control-plane"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Start Control Plane”</span></a></div>
<p>Start your cloud management control plane by setting up the CloudStack
management server:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="sh" dir="ltr"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">cloudstack-setup-management</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> cloudstack-management</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50">tail</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF"> -f</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF"> /var/log/cloudstack/management/management-server.log</span></span></code></pre><nova-code-copy-button type="button" data-code="cloudstack-setup-management
systemctl status cloudstack-management
tail -f /var/log/cloudstack/management/management-server.log" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<p>After the CloudStack management server is up, log into the management server using the default
credentials (username <code dir="auto">admin</code> and password <code dir="auto">password</code>) on the URL:</p>
<span class="sl-badge note large astro-avdet4wd">http://`192.168.1.10(i.e. the cloudbr0-IP)`:8080/client</span>
<img src="/_astro/login.DWiDgKZD.png" width="769" height="368" alt="CloudStack Login Page"/>
<aside aria-label="Tip" class="starlight-aside starlight-aside--tip"><p class="starlight-aside__title" aria-hidden="true"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="starlight-aside__icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.43909 8.85483L1.44039 8.85354L4.96668 5.33815C5.30653 4.99386 5.7685 4.79662 6.2524 4.78972L6.26553 4.78963L12.9014 4.78962L13.8479 3.84308C16.9187 0.772319 20.0546 0.770617 21.4678 0.975145C21.8617 1.02914 22.2271 1.21053 22.5083 1.4917C22.7894 1.77284 22.9708 2.13821 23.0248 2.53199C23.2294 3.94517 23.2278 7.08119 20.1569 10.1521L19.2107 11.0983V17.7338L19.2106 17.7469C19.2037 18.2308 19.0067 18.6933 18.6624 19.0331L15.1456 22.5608C14.9095 22.7966 14.6137 22.964 14.29 23.0449C13.9663 23.1259 13.6267 23.1174 13.3074 23.0204C12.9881 22.9235 12.7011 22.7417 12.4771 22.4944C12.2533 22.2473 12.1006 21.9441 12.0355 21.6171L11.1783 17.3417L6.65869 12.822L4.34847 12.3589L2.38351 11.965C2.05664 11.8998 1.75272 11.747 1.50564 11.5232C1.25835 11.2992 1.07653 11.0122 0.979561 10.6929C0.882595 10.3736 0.874125 10.034 0.955057 9.7103C1.03599 9.38659 1.20328 9.09092 1.43909 8.85483ZM6.8186 10.8724L2.94619 10.096L6.32006 6.73268H10.9583L6.8186 10.8724ZM15.2219 5.21703C17.681 2.75787 20.0783 2.75376 21.1124 2.8876C21.2462 3.92172 21.2421 6.31895 18.783 8.77812L12.0728 15.4883L8.51172 11.9272L15.2219 5.21703ZM13.9042 21.0538L13.1279 17.1811L17.2676 13.0414V17.68L13.9042 21.0538Z"></path><path d="M9.31827 18.3446C9.45046 17.8529 9.17864 17.3369 8.68945 17.1724C8.56178 17.1294 8.43145 17.1145 8.30512 17.1243C8.10513 17.1398 7.91519 17.2172 7.76181 17.3434C7.62613 17.455 7.51905 17.6048 7.45893 17.7835C6.97634 19.2186 5.77062 19.9878 4.52406 20.4029C4.08525 20.549 3.6605 20.644 3.29471 20.7053C3.35607 20.3395 3.45098 19.9148 3.59711 19.476C4.01221 18.2294 4.78141 17.0237 6.21648 16.5411C6.39528 16.481 6.54504 16.3739 6.65665 16.2382C6.85126 16.0016 6.92988 15.678 6.84417 15.3647C6.83922 15.3466 6.83373 15.3286 6.82767 15.3106C6.74106 15.053 6.55701 14.8557 6.33037 14.7459C6.10949 14.6389 5.84816 14.615 5.59715 14.6994C5.47743 14.7397 5.36103 14.7831 5.24786 14.8294C3.22626 15.6569 2.2347 17.4173 1.75357 18.8621C1.49662 19.6337 1.36993 20.3554 1.30679 20.8818C1.27505 21.1464 1.25893 21.3654 1.25072 21.5213C1.24662 21.5993 1.24448 21.6618 1.24337 21.7066L1.243 21.7226L1.24235 21.7605L1.2422 21.7771L1.24217 21.7827L1.24217 21.7856C1.24217 22.3221 1.67703 22.7579 2.2137 22.7579L2.2155 22.7579L2.22337 22.7578L2.23956 22.7577C2.25293 22.7575 2.27096 22.7572 2.29338 22.7567C2.33821 22.7555 2.40073 22.7534 2.47876 22.7493C2.63466 22.7411 2.85361 22.725 3.11822 22.6932C3.64462 22.6301 4.36636 22.5034 5.13797 22.2464C6.58274 21.7653 8.3431 20.7738 9.17063 18.7522C9.21696 18.639 9.26037 18.5226 9.30064 18.4029C9.30716 18.3835 9.31304 18.364 9.31827 18.3446Z"></path></svg>Tip</p><div class="starlight-aside__content"><p>Along with the UI, CloudStack’s official CLI <code dir="auto">CloudMonkey</code> or <code dir="auto">cmk</code> can be used
to interact with the management server control plane. Learn more here:
<a href="https://github.com/apache/cloudstack-cloudmonkey/wiki/Getting-Started">https://github.com/apache/cloudstack-cloudmonkey/wiki/Getting-Started</a></p></div></aside>
<div class="sl-heading-wrapper level-h2"><h2 id="deploy-your-private-cloud">Deploy Your Private Cloud</h2><a class="sl-anchor-link" href="#deploy-your-private-cloud"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Deploy Your Private Cloud”</span></a></div>
<p>The following is an example of how you can setup an advanced zone (without security groups)
in a typical (home/private) 192.168.1.0/24 network.</p>
<div class="sl-heading-wrapper level-h3"><h3 id="deploy-datacenter">Deploy DataCenter</h3><a class="sl-anchor-link" href="#deploy-datacenter"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Deploy DataCenter”</span></a></div>

<ol role="list" class="sl-steps">
<li>
<p>Create Zone:</p>
<p>Go to Infrastructure > Zone and click on add zone button, select advanced zone and provide following configuration:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e;overflow-x:auto" tabindex="0" data-language="plaintext" dir="ltr"><code><span class="line"><span>Name - any name</span></span>
<span class="line"><span>Public DNS 1 - 8.8.8.8</span></span>
<span class="line"><span>Internal DNS1 - 192.168.1.1</span></span>
<span class="line"><span>Hypervisor - KVM</span></span></code></pre><nova-code-copy-button type="button" data-code="Name - any name
Public DNS 1 - 8.8.8.8
Internal DNS1 - 192.168.1.1
Hypervisor - KVM" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<img src="/_astro/addzone.C0tWGBOu.png" width="1025" height="533" alt="CloudStack Zone Wizard">
</li>
<li>
<p>Setup Network</p>
<p>Use the default, which is <code dir="auto">VLAN</code> isolation method on a single physical nic (on the host) that will carry all traffic types (management, public, guest etc).</p>
<p>Note: If you’ve <code dir="auto">iproute2</code> installed and host’s physical NIC MTUs configured, you can used <code dir="auto">VXLAN</code> as well.</p>
<p>Public traffic configuration:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="plaintext" dir="ltr"><code><span class="line"><span>Gateway - 192.168.1.1</span></span>
<span class="line"><span>Netmask - 255.255.255.0</span></span>
<span class="line"><span>VLAN/VNI - (leave blank for vlan://untagged or in case of VXLAN use vxlan://untagged)</span></span>
<span class="line"><span>Start IP - 192.168.1.20</span></span>
<span class="line"><span>End IP - 192.168.1.50</span></span></code></pre><nova-code-copy-button type="button" data-code="Gateway - 192.168.1.1
Netmask - 255.255.255.0
VLAN/VNI - (leave blank for vlan://untagged or in case of VXLAN use vxlan://untagged)
Start IP - 192.168.1.20
End IP - 192.168.1.50" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
</li>
<li>
<p>Pod Configuration:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="plaintext" dir="ltr"><code><span class="line"><span>Name - any name</span></span>
<span class="line"><span>Gateway - 192.168.1.1</span></span>
<span class="line"><span>Start/end reserved system IPs - 192.168.1.51 - 192.168.1.80</span></span></code></pre><nova-code-copy-button type="button" data-code="Name - any name
Gateway - 192.168.1.1
Start/end reserved system IPs - 192.168.1.51 - 192.168.1.80" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
</li>
<li>
<p>Guest traffic:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="plaintext" dir="ltr"><code><span class="line"><span>VLAN/VNI range: 700-900</span></span></code></pre><nova-code-copy-button type="button" data-code="VLAN/VNI range: 700-900" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
</li>
<li>
<p>Create a cluster with following:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="plaintext" dir="ltr"><code><span class="line"><span>Name - any name</span></span>
<span class="line"><span>Hypervisor - Choose KVM</span></span></code></pre><nova-code-copy-button type="button" data-code="Name - any name
Hypervisor - Choose KVM" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
</li>
<li>
<p>Add your default/first host:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="plaintext" dir="ltr"><code><span class="line"><span>Hostname - 192.168.1.10</span></span>
<span class="line"><span>Username - root</span></span>
<span class="line"><span>Password - &#x3C;password for root user, or leave blank to add by public key></span></span></code></pre><nova-code-copy-button type="button" data-code="Hostname - 192.168.1.10
Username - root
Password - <password for root user, or leave blank to add by public key>" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<p>Note: <code dir="auto">root</code> user ssh-access is disabled by default, <a href="https://askubuntu.com/questions/469143/how-to-enable-ssh-root-access-on-ubuntu-14-04">please enable
it</a>.
The recommended approach is to add the KVM host using ssh public-key based
access, add the management server SSH public key which is usually at
<code dir="auto">/var/cloudstack/management/.ssh/id_rsa.pub</code> to the root user of the KVM host(s)
at <code dir="auto">/root/.ssh/authorized_keys</code>.</p>
</li>
<li>
<p>Add primary storage:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="plaintext" dir="ltr"><code><span class="line"><span>Name - any name</span></span>
<span class="line"><span>Scope - zone-wide</span></span>
<span class="line"><span>Protocol - NFS</span></span>
<span class="line"><span>Server - 192.168.1.10</span></span>
<span class="line"><span>Path - /export/primary</span></span></code></pre><nova-code-copy-button type="button" data-code="Name - any name
Scope - zone-wide
Protocol - NFS
Server - 192.168.1.10
Path - /export/primary" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
</li>
<li>
<p>Add secondary storage:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="plaintext" dir="ltr"><code><span class="line"><span>Provider - NFS</span></span>
<span class="line"><span>Name - any name</span></span>
<span class="line"><span>Server - 192.168.1.10</span></span>
<span class="line"><span>Path - /export/secondary</span></span></code></pre><nova-code-copy-button type="button" data-code="Provider - NFS
Name - any name
Server - 192.168.1.10
Path - /export/secondary" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
</li>
<li>
<p>Next, click <code dir="auto">Launch Zone</code> which will perform following actions:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="plaintext" dir="ltr"><code><span class="line"><span>Create Zone</span></span>
<span class="line"><span>Create Physical networks:</span></span>
<span class="line"><span>  - Add various traffic types to the physical network</span></span>
<span class="line"><span>  - Update and enable the physical network</span></span>
<span class="line"><span>  - Configure, enable and update various network provider and elements such as the virtual network element</span></span>
<span class="line"><span>Create Pod</span></span>
<span class="line"><span>Configure public traffic</span></span>
<span class="line"><span>Configure guest traffic (vlan range for physical network)</span></span>
<span class="line"><span>Create Cluster</span></span>
<span class="line"><span>Add host</span></span>
<span class="line"><span>Create primary storage (also mounts it on the KVM host)</span></span>
<span class="line"><span>Create secondary storage</span></span>
<span class="line"><span>Complete zone creation</span></span></code></pre><nova-code-copy-button type="button" data-code="Create Zone
Create Physical networks:
  - Add various traffic types to the physical network
  - Update and enable the physical network
  - Configure, enable and update various network provider and elements such as the virtual network element
Create Pod
Configure public traffic
Configure guest traffic (vlan range for physical network)
Create Cluster
Add host
Create primary storage (also mounts it on the KVM host)
Create secondary storage
Complete zone creation" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
</li>
<li>
<p>Enable Zone</p>
<p>Finally, confirm and enable the zone. Wait for the system VMs to come up
under Infrastructure -> System VMs, then you can proceed using your IaaS cloud.</p>
</li>
</ol>
<div class="sl-heading-wrapper level-h3"><h3 id="register-templates">Register Templates</h3><a class="sl-anchor-link" href="#register-templates"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Register Templates”</span></a></div>
<p>You can register publicly available cloud-init enabled guest templates such as:</p>



































<table><thead><tr><th align="left">Distro</th><th align="left">x86_64</th><th align="left">ARM64</th></tr></thead><tbody><tr><td align="left">Ubuntu 24.04</td><td align="left"><a href="https://cloud-images.ubuntu.com/releases/24.04/release/ubuntu-24.04-server-cloudimg-amd64.img">https://cloud-images.ubuntu.com/releases/24.04/release/ubuntu-24.04-server-cloudimg-amd64.img</a></td><td align="left"><a href="https://cloud-images.ubuntu.com/releases/24.04/release/ubuntu-24.04-server-cloudimg-arm64.img">https://cloud-images.ubuntu.com/releases/24.04/release/ubuntu-24.04-server-cloudimg-arm64.img</a></td></tr><tr><td align="left">Ubuntu 22.04</td><td align="left"><a href="https://cloud-images.ubuntu.com/releases/22.04/release/ubuntu-22.04-server-cloudimg-amd64.img">https://cloud-images.ubuntu.com/releases/22.04/release/ubuntu-22.04-server-cloudimg-amd64.img</a></td><td align="left"><a href="https://cloud-images.ubuntu.com/releases/22.04/release/ubuntu-22.04-server-cloudimg-arm64.img">https://cloud-images.ubuntu.com/releases/22.04/release/ubuntu-22.04-server-cloudimg-arm64.img</a></td></tr><tr><td align="left">Debian 12</td><td align="left"><a href="https://cloud.debian.org/images/cloud/bookworm/latest/debian-12-genericcloud-amd64.qcow2">https://cloud.debian.org/images/cloud/bookworm/latest/debian-12-genericcloud-amd64.qcow2</a></td><td align="left"><a href="https://cloud.debian.org/images/cloud/bookworm/latest/debian-12-genericcloud-arm64.qcow2">https://cloud.debian.org/images/cloud/bookworm/latest/debian-12-genericcloud-arm64.qcow2</a></td></tr><tr><td align="left">AlmaLinux 9</td><td align="left"><a href="https://repo.almalinux.org/almalinux/9/cloud/x86_64/images/AlmaLinux-9-GenericCloud-latest.x86_64.qcow2">https://repo.almalinux.org/almalinux/9/cloud/x86_64/images/AlmaLinux-9-GenericCloud-latest.x86_64.qcow2</a></td><td align="left"><a href="https://repo.almalinux.org/almalinux/9/cloud/aarch64/images/AlmaLinux-9-GenericCloud-latest.aarch64.qcow2">https://repo.almalinux.org/almalinux/9/cloud/aarch64/images/AlmaLinux-9-GenericCloud-latest.aarch64.qcow2</a></td></tr><tr><td align="left">OpenSUSE 15</td><td align="left"><a href="https://download.opensuse.org/distribution/leap/15.5/appliances/openSUSE-Leap-15.5-Minimal-VM.x86_64-Cloud.qcow2">https://download.opensuse.org/distribution/leap/15.5/appliances/openSUSE-Leap-15.5-Minimal-VM.x86_64-Cloud.qcow2</a></td><td align="left"><a href="https://download.opensuse.org/distribution/leap/15.5/appliances/openSUSE-Leap-15.5-Minimal-VM.aarch64-Cloud.qcow2">https://download.opensuse.org/distribution/leap/15.5/appliances/openSUSE-Leap-15.5-Minimal-VM.aarch64-Cloud.qcow2</a></td></tr></tbody></table>
<aside aria-label="Tip" class="starlight-aside starlight-aside--tip"><p class="starlight-aside__title" aria-hidden="true"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="starlight-aside__icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M1.43909 8.85483L1.44039 8.85354L4.96668 5.33815C5.30653 4.99386 5.7685 4.79662 6.2524 4.78972L6.26553 4.78963L12.9014 4.78962L13.8479 3.84308C16.9187 0.772319 20.0546 0.770617 21.4678 0.975145C21.8617 1.02914 22.2271 1.21053 22.5083 1.4917C22.7894 1.77284 22.9708 2.13821 23.0248 2.53199C23.2294 3.94517 23.2278 7.08119 20.1569 10.1521L19.2107 11.0983V17.7338L19.2106 17.7469C19.2037 18.2308 19.0067 18.6933 18.6624 19.0331L15.1456 22.5608C14.9095 22.7966 14.6137 22.964 14.29 23.0449C13.9663 23.1259 13.6267 23.1174 13.3074 23.0204C12.9881 22.9235 12.7011 22.7417 12.4771 22.4944C12.2533 22.2473 12.1006 21.9441 12.0355 21.6171L11.1783 17.3417L6.65869 12.822L4.34847 12.3589L2.38351 11.965C2.05664 11.8998 1.75272 11.747 1.50564 11.5232C1.25835 11.2992 1.07653 11.0122 0.979561 10.6929C0.882595 10.3736 0.874125 10.034 0.955057 9.7103C1.03599 9.38659 1.20328 9.09092 1.43909 8.85483ZM6.8186 10.8724L2.94619 10.096L6.32006 6.73268H10.9583L6.8186 10.8724ZM15.2219 5.21703C17.681 2.75787 20.0783 2.75376 21.1124 2.8876C21.2462 3.92172 21.2421 6.31895 18.783 8.77812L12.0728 15.4883L8.51172 11.9272L15.2219 5.21703ZM13.9042 21.0538L13.1279 17.1811L17.2676 13.0414V17.68L13.9042 21.0538Z"></path><path d="M9.31827 18.3446C9.45046 17.8529 9.17864 17.3369 8.68945 17.1724C8.56178 17.1294 8.43145 17.1145 8.30512 17.1243C8.10513 17.1398 7.91519 17.2172 7.76181 17.3434C7.62613 17.455 7.51905 17.6048 7.45893 17.7835C6.97634 19.2186 5.77062 19.9878 4.52406 20.4029C4.08525 20.549 3.6605 20.644 3.29471 20.7053C3.35607 20.3395 3.45098 19.9148 3.59711 19.476C4.01221 18.2294 4.78141 17.0237 6.21648 16.5411C6.39528 16.481 6.54504 16.3739 6.65665 16.2382C6.85126 16.0016 6.92988 15.678 6.84417 15.3647C6.83922 15.3466 6.83373 15.3286 6.82767 15.3106C6.74106 15.053 6.55701 14.8557 6.33037 14.7459C6.10949 14.6389 5.84816 14.615 5.59715 14.6994C5.47743 14.7397 5.36103 14.7831 5.24786 14.8294C3.22626 15.6569 2.2347 17.4173 1.75357 18.8621C1.49662 19.6337 1.36993 20.3554 1.30679 20.8818C1.27505 21.1464 1.25893 21.3654 1.25072 21.5213C1.24662 21.5993 1.24448 21.6618 1.24337 21.7066L1.243 21.7226L1.24235 21.7605L1.2422 21.7771L1.24217 21.7827L1.24217 21.7856C1.24217 22.3221 1.67703 22.7579 2.2137 22.7579L2.2155 22.7579L2.22337 22.7578L2.23956 22.7577C2.25293 22.7575 2.27096 22.7572 2.29338 22.7567C2.33821 22.7555 2.40073 22.7534 2.47876 22.7493C2.63466 22.7411 2.85361 22.725 3.11822 22.6932C3.64462 22.6301 4.36636 22.5034 5.13797 22.2464C6.58274 21.7653 8.3431 20.7738 9.17063 18.7522C9.21696 18.639 9.26037 18.5226 9.30064 18.4029C9.30716 18.3835 9.31304 18.364 9.31827 18.3446Z"></path></svg>Tip</p><div class="starlight-aside__content"><p>Before deploying instances using cloud-init based templates, don’t forget to
register your SSH public key in your CloudStack account which you can do so
using API/CLI or using UI under <code dir="auto">Compute > SSH Key Pairs</code>.</p></div></aside>
<div class="sl-heading-wrapper level-h3"><h3 id="add-networks">Add Networks</h3><a class="sl-anchor-link" href="#add-networks"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Add Networks”</span></a></div>
<p>With the configured and deployed zone, once System VMs are up and running, you
can create <a href="https://docs.cloudstack.apache.org/en/latest/adminguide/networking.html">isolated network or VPC for your
account</a>
for the built-in admin account or any new user account you may created that
can be later used to deploy instances.</p>
<p>For simplicity, you may also create a shared network in the unused IP address
space of your home/private network. For example, create shared network using
API/CLI or UI under <code dir="auto">Network > Guest Networks > Add Network > Shared</code> using:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="plaintext" dir="ltr"><code><span class="line"><span>Physical Network - cloudbr0</span></span>
<span class="line"><span>VLAN/VNI - untagged</span></span>
<span class="line"><span>IPv4 Gateway - 192.168.1.1</span></span>
<span class="line"><span>IPv4 Netmask - 255.255.255.0</span></span>
<span class="line"><span>IPv4 Start IP - 192.168.1.81</span></span>
<span class="line"><span>IPv4 End IP - 192.168.1.100</span></span>
<span class="line"><span>DNS1 - 192.168.1.1</span></span>
<span class="line"><span>DNS2 - 1.1.1.1</span></span></code></pre><nova-code-copy-button type="button" data-code="Physical Network - cloudbr0
VLAN/VNI - untagged
IPv4 Gateway - 192.168.1.1
IPv4 Netmask - 255.255.255.0
IPv4 Start IP - 192.168.1.81
IPv4 End IP - 192.168.1.100
DNS1 - 192.168.1.1
DNS2 - 1.1.1.1" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<div class="sl-heading-wrapper level-h3"><h3 id="deploying-instance">Deploying Instance</h3><a class="sl-anchor-link" href="#deploying-instance"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Deploying Instance”</span></a></div>
<p>In the UI, an instance can be created using the top navigation “Create” button
or via <code dir="auto">Compute > Instances > Add Instance</code> where you can specify a minimum of:</p>
<div data-nova-code-container="" class="nova-code-container not-content"><pre class="astro-code astro-code-themes one-light github-dark-dimmed" style="--shiki-light:#383A42;--shiki-dark:#adbac7;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#22272e; overflow-x: auto;" tabindex="0" data-language="plaintext" dir="ltr"><code><span class="line"><span>Zone - select the zone</span></span>
<span class="line"><span>Arch - select your arch (x86_64 or ARM64)</span></span>
<span class="line"><span>Image - select the registed template</span></span>
<span class="line"><span>Compute Offering - select the offering (new ones can be created later on)</span></span>
<span class="line"><span>Networks - select one or more network where you want to deploy this instance</span></span>
<span class="line"><span>SSH key pairs - select one or more ssh public key pairs that you may have added</span></span>
<span class="line"><span>Name - (optional) name of the instance</span></span></code></pre><nova-code-copy-button type="button" data-code="Zone - select the zone
Arch - select your arch (x86_64 or ARM64)
Image - select the registed template
Compute Offering - select the offering (new ones can be created later on)
Networks - select one or more network where you want to deploy this instance
SSH key pairs - select one or more ssh public key pairs that you may have added
Name - (optional) name of the instance" title="Copy code" aria-label="Copy code" class="nova-code-copy-button"></nova-code-copy-button></div>
<p>… and hit <code dir="auto">Launch Instance</code> to create your instance!</p>
<div class="sl-heading-wrapper level-h3"><h3 id="integrations">Integrations</h3><a class="sl-anchor-link" href="#integrations"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Integrations”</span></a></div>
<p>CloudStack has several integrations, the following is a list of some of the
popular or official ones:</p>
<ul>
<li>CLI: <a href="https://github.com/apache/cloudstack-cloudmonkey">https://github.com/apache/cloudstack-cloudmonkey</a></li>
<li>Terraform Provider: <a href="https://github.com/apache/cloudstack-terraform-provider">https://github.com/apache/cloudstack-terraform-provider</a></li>
<li>Ansible: <a href="https://github.com/ngine-io/ansible-collection-cloudstack">https://github.com/ngine-io/ansible-collection-cloudstack</a></li>
<li>Kubernetes integration: <a href="https://github.com/apache/cloudstack-kubernetes-provider">https://github.com/apache/cloudstack-kubernetes-provider</a></li>
<li>Kubernetes Cluster API Provider: <a href="https://github.com/kubernetes-sigs/cluster-api-provider-cloudstack">https://github.com/kubernetes-sigs/cluster-api-provider-cloudstack</a></li>
<li>Go SDK: <a href="https://github.com/apache/cloudstack-go">https://github.com/apache/cloudstack-go</a> (for developers)</li>
<li>Benchmarking tool: <a href="https://github.com/apache/cloudstack-csbench">https://github.com/apache/cloudstack-csbench</a></li>
<li>More here: <a href="https://cloudstack.apache.org/integrations">https://cloudstack.apache.org/integrations</a></li>
</ul>
<div class="sl-heading-wrapper level-h2"><h2 id="where-to-go-next">Where to go next?</h2><a class="sl-anchor-link" href="#where-to-go-next"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Where to go next?”</span></a></div>
<p>If you’re stuck on to something and have questions, then:</p>
<ul>
<li>Join and ask on the CloudStack <code dir="auto">users@</code> mailing list: <a href="https://cloudstack.apache.org/mailing-lists">https://cloudstack.apache.org/mailing-lists</a></li>
<li>Start a discussion sharing the details of your problem: <a href="https://github.com/apache/cloudstack/discussions">https://github.com/apache/cloudstack/discussions</a></li>
</ul>
<p>Further reading:</p>
<ul>
<li>ShapeBlue’s Apache CloudStack PoC Guide: <a href="https://www.shapeblue.com/apache-cloudstack-poc-guide/">https://www.shapeblue.com/apache-cloudstack-poc-guide</a></li>
<li>ShapeBlue’s Apache CloudStack Quick Build Guide: <a href="https://www.shapeblue.com/cloudstack-iaas-quick-build-guide/">https://www.shapeblue.com/cloudstack-iaas-quick-build-guide/</a></li>
<li>CloudStack Networking 101: <a href="https://www.shapeblue.com/a-beginners-guide-to-cloudstack-networking/">https://www.shapeblue.com/a-beginners-guide-to-cloudstack-networking/</a></li>
<li>CloudStack <a href="https://www.youtube.com/watch?v=XQwqqcPWDbE">Networking Models - A Step-by-step Guide - Part 1</a></li>
<li>CloudStack <a href="https://www.youtube.com/watch?v=hSfl2QfSJMg">Networking Models - A Step-by-step Guide - Part 2</a></li>
<li>Project Documentation: <a href="https://docs.cloudstack.apache.org/">https://docs.cloudstack.apache.org/</a></li>
</ul>
<div class="sl-heading-wrapper level-h2"><h2 id="comments">Comments</h2><a class="sl-anchor-link" href="#comments"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Comments”</span></a></div>
<script src="https://giscus.app/client.js" data-repo="yadvr/yadvr.github.io" data-repo-id="MDEwOlJlcG9zaXRvcnkzMDU5Nzk2" data-category="Comments" data-category-id="DIC_kwDOAC6wVM4Cwbtd" data-mapping="pathname" data-strict="0" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="preferred_color_scheme" data-lang="en" data-loading="lazy" crossorigin="anonymous" async></script>  <div class="post-footer astro-3jbi6clj"> <div class="astro-sg3lsd66"><b class="astro-sg3lsd66">Tags:</b><ul class="astro-sg3lsd66"><li class="astro-sg3lsd66"><a href="/blog/tags/guide/" class="astro-sg3lsd66">guide</a></li><li class="astro-sg3lsd66"><a href="/blog/tags/cloudstack/" class="astro-sg3lsd66">cloudstack</a></li></ul></div> <div class="pagination astro-q3jscx35" data-pagefind-ignore><div class="card-grid astro-zntqmydn"><div class="sl-link-card astro-mf7fz2mj"> <span class="sl-flex stack astro-mf7fz2mj"> <a href="/blog/ceph/" rel="next" class="astro-q3jscx35 astro-mf7fz2mj"> <span class="title astro-mf7fz2mj">Ceph Storage with CloudStack on Ubuntu/KVM</span> </a>  </span> <svg aria-hidden="true" class="icon rtl:flip astro-mf7fz2mj astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.333em;"><path d="M17.92 11.62a1.001 1.001 0 0 0-.21-.33l-5-5a1.003 1.003 0 1 0-1.42 1.42l3.3 3.29H7a1 1 0 0 0 0 2h7.59l-3.3 3.29a1.002 1.002 0 0 0 .325 1.639 1 1 0 0 0 1.095-.219l5-5a1 1 0 0 0 .21-.33 1 1 0 0 0 0-.76Z"/></svg> </div> </div> </div> </div> </div>  <footer class="custom-footer astro-o5o7wsh2"> <div class="footer-container astro-o5o7wsh2"> <div class="footer-main astro-o5o7wsh2"> <!-- Logo and tagline --> <div class="footer-brand astro-o5o7wsh2"> <a href="/" class="site-title sl-flex astro-m46x6ez3">  <img class="light:sl-hidden print:hidden astro-m46x6ez3" alt src="/_astro/logo-white.B5DAh2NK.svg" width="971" height="119"> <img class="dark:sl-hidden print:block astro-m46x6ez3" alt src="/_astro/logo.ienR-kzb.svg" width="971" height="119"> <span class="sr-only astro-m46x6ez3" translate="no"> ScaleNinja </span> </a>  <p class="footer-tagline astro-o5o7wsh2">The OnPrem Company</p> <!-- Social icons --> <div class="footer-social astro-o5o7wsh2"> <a href="mailto:hi@scaleninja.com" aria-label="Email" class="astro-o5o7wsh2"> <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="astro-o5o7wsh2"> <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" class="astro-o5o7wsh2"></path> </svg> </a> <a href="https://github.com/scaleninja" target="_blank" rel="noopener" aria-label="GitHub" class="astro-o5o7wsh2"> <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="astro-o5o7wsh2"> <path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z" class="astro-o5o7wsh2"></path> </svg> </a> <a href="https://twitter.com/scaleninja" target="_blank" rel="noopener" aria-label="Twitter" class="astro-o5o7wsh2"> <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="astro-o5o7wsh2"> <path d="M24 4.4a10 10 0 0 1-2.83.78 5.05 5.05 0 0 0 2.17-2.79 9.7 9.7 0 0 1-3.13 1.23 4.89 4.89 0 0 0-5.94-1.03 5 5 0 0 0-2.17 2.38 5.15 5.15 0 0 0-.3 3.25c-1.95-.1-3.86-.63-5.61-1.53a14.04 14.04 0 0 1-4.52-3.74 5.2 5.2 0 0 0-.09 4.91c.39.74.94 1.35 1.61 1.82a4.77 4.77 0 0 1-2.23-.63v.06c0 1.16.4 2.29 1.12 3.18a4.9 4.9 0 0 0 2.84 1.74c-.73.22-1.5.26-2.24.12a4.89 4.89 0 0 0 4.59 3.49A9.78 9.78 0 0 1 0 19.73 13.65 13.65 0 0 0 7.55 22a13.63 13.63 0 0 0 9.96-4.16A14.26 14.26 0 0 0 21.6 7.65V7c.94-.72 1.75-1.6 2.4-2.6Z" class="astro-o5o7wsh2"></path> </svg> </a> <a href="https://discord.gg/yourserver" target="_blank" rel="noopener" aria-label="Discord" class="astro-o5o7wsh2"> <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="astro-o5o7wsh2"> <path d="M20.317 4.492c-1.53-.69-3.17-1.2-4.885-1.49a.075.075 0 0 0-.079.036c-.21.369-.444.85-.608 1.23a18.566 18.566 0 0 0-5.487 0 12.36 12.36 0 0 0-.617-1.23A.077.077 0 0 0 8.562 3c-1.714.29-3.354.8-4.885 1.491a.07.07 0 0 0-.032.027C.533 9.093-.32 13.555.099 17.961a.08.08 0 0 0 .031.055 20.03 20.03 0 0 0 5.993 2.98.078.078 0 0 0 .084-.026c.462-.62.874-1.275 1.226-1.963.021-.04.001-.088-.041-.104a13.201 13.201 0 0 1-1.872-.878.075.075 0 0 1-.008-.125c.126-.093.252-.19.372-.287a.075.075 0 0 1 .078-.01c3.927 1.764 8.18 1.764 12.061 0a.075.075 0 0 1 .079.009c.12.098.245.195.372.288a.075.075 0 0 1-.006.125c-.598.344-1.22.635-1.873.877a.075.075 0 0 0-.041.105c.36.687.772 1.341 1.225 1.962a.077.077 0 0 0 .084.028 19.963 19.963 0 0 0 6.002-2.981.076.076 0 0 0 .032-.054c.5-5.094-.838-9.52-3.549-13.442a.06.06 0 0 0-.031-.028ZM8.02 15.278c-1.182 0-2.157-1.069-2.157-2.38 0-1.312.956-2.38 2.157-2.38 1.21 0 2.176 1.077 2.157 2.38 0 1.312-.956 2.38-2.157 2.38Zm7.975 0c-1.183 0-2.157-1.069-2.157-2.38 0-1.312.955-2.38 2.157-2.38 1.21 0 2.176 1.077 2.157 2.38 0 1.312-.946 2.38-2.157 2.38Z" class="astro-o5o7wsh2"></path> </svg> </a> <a href="https://www.linkedin.com/company/scaleninja" target="_blank" rel="noopener" aria-label="LinkedIn" class="astro-o5o7wsh2"> <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="astro-o5o7wsh2"> <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" class="astro-o5o7wsh2"></path> </svg> </a> <a href="https://www.reddit.com/user/scaleninja" target="_blank" rel="noopener" aria-label="Reddit" class="astro-o5o7wsh2"> <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="astro-o5o7wsh2"> <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z" class="astro-o5o7wsh2"></path> </svg> </a> <a href="https://www.youtube.com/@scaleninja" target="_blank" rel="noopener" aria-label="YouTube" class="astro-o5o7wsh2"> <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="astro-o5o7wsh2"> <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z" class="astro-o5o7wsh2"></path> </svg> </a> </div> <div class="footer-section footer-subscribe astro-o5o7wsh2"> <p class="subscribe-text astro-o5o7wsh2">Get notified on new updates and blog posts.</p> <form id="subscribe-form" class="subscribe-form astro-o5o7wsh2"> <input type="email" name="entry.1769037418" placeholder="you@email.com" required aria-label="Email address" class="astro-o5o7wsh2"> <button type="submit" class="astro-o5o7wsh2">Subscribe</button> </form> <p id="subscribe-status" class="subscribe-status astro-o5o7wsh2"></p> </div> </div> <!-- Footer links sections --> <div class="footer-links astro-o5o7wsh2"> <div class="footer-section astro-o5o7wsh2"> <h4 class="astro-o5o7wsh2">Resources</h4> <ul class="astro-o5o7wsh2"> <li class="astro-o5o7wsh2"><a href="/blog" class="astro-o5o7wsh2">Blog</a></li> </ul> </div> <div class="footer-section astro-o5o7wsh2"> <h4 class="astro-o5o7wsh2">Support</h4> <ul class="astro-o5o7wsh2"> <li class="astro-o5o7wsh2"><a href="https://github.com/scaleninja/scaleninja" target="_blank" rel="noopener" class="astro-o5o7wsh2">Issues</a></li> </ul> </div> <div class="footer-section astro-o5o7wsh2"> <h4 class="astro-o5o7wsh2">Company</h4> <ul class="astro-o5o7wsh2"> <li class="astro-o5o7wsh2"><a href="/contact" class="astro-o5o7wsh2">Contact Us</a></li> </ul> </div> </div> </div> <!-- Footer bottom --> <div class="footer-bottom astro-o5o7wsh2"> <div class="footer-bottom-left astro-o5o7wsh2"> <p class="astro-o5o7wsh2">&copy; 2014-2026 ScaleNinja. All rights reserved.</p> </div> <div class="footer-bottom-right astro-o5o7wsh2"> <a href="/privacy" class="astro-o5o7wsh2">Privacy Policy</a> <span class="separator astro-o5o7wsh2">•</span> <a href="/terms" class="astro-o5o7wsh2">Terms of Service</a> </div> </div> <p class="footer-brewed astro-o5o7wsh2"></p> </div> </footer> <script type="module">document.addEventListener("DOMContentLoaded",function(){var t=document.getElementById("subscribe-form"),e=document.getElementById("subscribe-status");!t||!e||t.addEventListener("submit",function(s){if(s.preventDefault(),!t.checkValidity()){t.reportValidity();return}var n=t.querySelector("button");n.disabled=!0,n.textContent="...",e.className="subscribe-status",e.textContent="";var o=new FormData(t);fetch("https://docs.google.com/forms/d/e/1FAIpQLSdmypu25LKFRnerbdorlPk60dvwwFen7YFB2le05cdxkdZvzQ/formResponse",{method:"POST",body:o,mode:"no-cors"}).then(function(){e.className="subscribe-status success",e.textContent="You're subscribed!",t.reset()}).catch(function(){e.className="subscribe-status error",e.textContent="Something went wrong."}).finally(function(){n.disabled=!1,n.textContent="Subscribe"})})});</script>  </div> </div>   </main> </div> </div>  </div> </div>  </body></html>